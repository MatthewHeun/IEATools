<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>IEATools • IEATools</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="IEATools">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">IEATools</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.76</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item"><a class="nav-link" href="../articles/IEATools.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/final_to_useful.html">Final to Useful Analysis</a></li>
    <li><a class="dropdown-item" href="../articles/fix_iea_data.html">Fixes for IEA Data</a></li>
    <li><a class="dropdown-item" href="../articles/prep_psut.html">Prepare for PSUT analysis</a></li>
    <li><a class="dropdown-item" href="../articles/psut_names.html">PSUT Names</a></li>
    <li><a class="dropdown-item" href="../articles/specify.html">Specify EIOU Industries and Flows</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>IEATools</h1>
                        <h4 data-toc-skip class="author">Matthew Kuperus
Heun</h4>
            
            <h4 data-toc-skip class="date">2025-05-14</h4>
      

      <div class="d-none name"><code>IEATools.Rmd</code></div>
    </div>

    
    
<div class="section level3">
<h3 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h3>
<p><code>IEATools</code> is an <code>R</code> package that provides
functions to analyze extended energy balance data from the <a href="https://www.iea.org" class="external-link">International Energy Agency (IEA)</a>. The
IEA’s data are not free. But if you have access to the data, you can
follow the instructions in this vignette to analyze it.</p>
</div>
<div class="section level3">
<h3 id="getting-started">Getting started<a class="anchor" aria-label="anchor" href="#getting-started"></a>
</h3>
<p>To get started, data must be obtained and pulled into an R data
frame.</p>
<div class="section level4">
<h4 id="obtain-iea-data">Obtain IEA data<a class="anchor" aria-label="anchor" href="#obtain-iea-data"></a>
</h4>
<p>Purchase the IEA extended energy balances product from (<a href="https://data.iea.org" class="external-link uri">https://data.iea.org</a>).
Download the complete extended energy balance data for at least one
country in a .csv file format as shown in the following figure.</p>
<div class="figure">
<embed src="figs/original_header.pdf" title="IEA extended energy balance data format." width="100%" type="application/pdf"></embed><p class="caption">
IEA extended energy balance data format.
</p>
</div>
<p>Example data from two countries, Ghana (GHA) and South Africa (ZAF),
for two years, 1971 and 2000, are provided in the <code>IEATools</code>
package.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://matthewheun.github.io/IEATools/">IEATools</a></span><span class="op">)</span></span>
<span><span class="co"># Define the file location</span></span>
<span><span class="va">IEA_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"GH-ZA-ktoe-Extended-Energy-Balances-sample.csv"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span>package <span class="op">=</span> <span class="st">"IEATools"</span><span class="op">)</span></span>
<span><span class="co"># Or use the function</span></span>
<span><span class="va">IEA_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sample_iea_data_path.html">sample_iea_data_path</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/readChar.html" class="external-link">readChar</a></span><span class="op">(</span><span class="va">IEA_path</span>, nchars <span class="op">=</span> <span class="fl">256</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "COUNTRY,FLOW,PRODUCT,1971,2000\nGhana,Production,Hard coal (if no detail),0,x\nGhana,Production,Brown coal (if no detail),0,x\nGhana,Production,Anthracite,..,0\nGhana,Production,Coking coal,..,0\nGhana,Production,Other bituminous coal,..,0\nGhana,Production,Sub-"</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="check-the-integrity-of-the-iea-data-file-iea_file_ok">Check the integrity of the IEA data file
(<code>iea_file_OK()</code>)<a class="anchor" aria-label="anchor" href="#check-the-integrity-of-the-iea-data-file-iea_file_ok"></a>
</h4>
<p>When starting to work with an IEA data file, it is important to
verify its integrity. <code><a href="../reference/iea_file_OK.html">iea_file_OK()</a></code> performs This function
performs some validation tests on its argument. Specifically, this
function confirms that every country has the same <code>FLOW</code> and
<code>PRODUCT</code> rows in the same order. Note that the IEA data file
is read internally with <code><a href="https://rdatatable.gitlab.io/data.table/reference/fread.html" class="external-link">data.table::fread()</a></code>
<em>without</em> stripping white space. Also, if the IEA data file
passes the integrity checks, a data frame representing the file (without
modification) is returned.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">IEA_path</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/iea_file_OK.html">iea_file_OK</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt;  logi TRUE</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="convert-the-iea-data-into-an-r-data-frame-iea_df">Convert the IEA data into an R data frame
(<code>iea_df()</code>)<a class="anchor" aria-label="anchor" href="#convert-the-iea-data-into-an-r-data-frame-iea_df"></a>
</h4>
<p>Extended energy balance data can be pulled directly into an
<code>R</code> data frame by the <code><a href="../reference/iea_df.html">iea_df()</a></code> function.
<code><a href="../reference/iea_df.html">iea_df()</a></code> fixes the header shown in the figure above,
converting it to a single row. Furthermore, <code><a href="../reference/iea_df.html">iea_df()</a></code> deals
with the IEA’s indicators for not applicable values (“<code>x</code>”),
for unavailable values (“<code>..</code>”), and for confidential values
(“<code>c</code>”). (See “World Energy Balances: Database Documentation
(2018 edition)” at (<a href="http://wds.iea.org/wds/pdf/worldbal_documentation.pdf" class="external-link uri">http://wds.iea.org/wds/pdf/worldbal_documentation.pdf</a>).)</p>
<p><code>R</code> has three concepts that could be used for
“<code>x</code>” and “<code>..</code>”: <code>0</code> would indicate
value known to be zero. <code>NULL</code> would indicate an undefined
value. <code>NA</code> would indicate a value that is unavailable.</p>
<p>In theory, mapping from the IEA’s indicators to <code>R</code> should
be done as follows: “<code>..</code>” (unavailable) and “<code>c</code>”
(confidential) would be converted to <code>NA</code> in <code>R</code>.
“<code>x</code>” (not applicable) would be converted to <code>0</code>
in <code>R</code>. “<code>NULL</code>” would not be used. However, the
IEA are not consistent with their coding. In some places
“<code>..</code>” (unavailable) is used for not applicable values,
e.g. World Anthracite supply in 1971. (World Anthracite supply in 1971
is actually not applicable (“<code>x</code>”), because Anthracite was
classified under “Hard coal (if no detail)” in 1971.) On the other hand,
“<code>..</code>” is used correctly for data in the most recent year
when those data have not yet been incorporated into the database.</p>
<p>In the face of IEA’s inconsistencies, the only rational way to
proceed is to convert “<code>x</code>”, “<code>..</code>”, and
“<code>c</code>” to “<code>0</code>”. <code><a href="../reference/iea_df.html">iea_df()</a></code> performs
that task.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">IEA_data</span> <span class="op">&lt;-</span> <span class="va">IEA_path</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/iea_df.html">iea_df</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">IEA_data</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: 14,688</span></span>
<span><span class="co">#&gt; Columns: 5</span></span>
<span><span class="co">#&gt; $ COUNTRY <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Ghana"<span style="color: #949494;">, </span>"Ghana"<span style="color: #949494;">, </span>"Ghana"<span style="color: #949494;">, </span>"Ghana"<span style="color: #949494;">, </span>"Ghana"<span style="color: #949494;">, </span>"Ghana"<span style="color: #949494;">, </span>"Ghana"<span style="color: #949494;">,</span>…</span></span>
<span><span class="co">#&gt; $ FLOW    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Production"<span style="color: #949494;">, </span>"Production"<span style="color: #949494;">, </span>"Production"<span style="color: #949494;">, </span>"Production"<span style="color: #949494;">, </span>"Produ…</span></span>
<span><span class="co">#&gt; $ PRODUCT <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Hard coal (if no detail)"<span style="color: #949494;">, </span>"Brown coal (if no detail)"<span style="color: #949494;">, </span>"Anth…</span></span>
<span><span class="co">#&gt; $ `1971`  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">,</span>…</span></span>
<span><span class="co">#&gt; $ `2000`  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">,</span>…</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="next-steps">Next steps<a class="anchor" aria-label="anchor" href="#next-steps"></a>
</h3>
<p>There are several reasons why the IEA extended energy balance data
are not convenient for immediate use.</p>
<ol style="list-style-type: decimal">
<li>Column titles are SHOUTING.</li>
<li>The <code>COUNTRY</code> column contains full (long) country names.
It would be nicer if countries were identified by their <a href="https://en.wikipedia.org/wiki/ISO_3166-1" class="external-link">2- or 3-letter ISO
codes</a>.</li>
<li>The demarcation between the supply and consumption sides of the
ledger is unclear to new users.</li>
<li>How data should be aggregated is unclear to new users.</li>
<li>The data are not in <a href="https://doi.org/10.18637/jss.v059.i10" class="external-link">tidy format</a>.</li>
</ol>
<p>The <code>IEATools</code> package has functions to address each of
these issues.</p>
<div class="section level4">
<h4 id="fix-column-titles-rename_iea_df_cols">Fix column titles (<code>rename_iea_df_cols()</code>)<a class="anchor" aria-label="anchor" href="#fix-column-titles-rename_iea_df_cols"></a>
</h4>
<p>To unshout the column titles, use the
<code><a href="../reference/rename_iea_df_cols.html">rename_iea_df_cols()</a></code> function.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">IEA_data</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/rename_iea_df_cols.html">rename_iea_df_cols</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: 14,688</span></span>
<span><span class="co">#&gt; Columns: 5</span></span>
<span><span class="co">#&gt; $ Country <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Ghana"<span style="color: #949494;">, </span>"Ghana"<span style="color: #949494;">, </span>"Ghana"<span style="color: #949494;">, </span>"Ghana"<span style="color: #949494;">, </span>"Ghana"<span style="color: #949494;">, </span>"Ghana"<span style="color: #949494;">, </span>"Ghana"<span style="color: #949494;">,</span>…</span></span>
<span><span class="co">#&gt; $ Flow    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Production"<span style="color: #949494;">, </span>"Production"<span style="color: #949494;">, </span>"Production"<span style="color: #949494;">, </span>"Production"<span style="color: #949494;">, </span>"Produ…</span></span>
<span><span class="co">#&gt; $ Product <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Hard coal (if no detail)"<span style="color: #949494;">, </span>"Brown coal (if no detail)"<span style="color: #949494;">, </span>"Anth…</span></span>
<span><span class="co">#&gt; $ `1971`  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">,</span>…</span></span>
<span><span class="co">#&gt; $ `2000`  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">,</span>…</span></span></code></pre></div>
<p>Note that the example above uses the
<code><a href="../reference/rename_iea_df_cols.html">rename_iea_df_cols()</a></code> function without arguments, because
the default arguments are correct for the extended energy balance data
as it arrives from the IEA. However, both the old and new names can be
specified as arguments. If you despise both capitals letters and vowels,
you could do the following.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">IEA_data</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/rename_iea_df_cols.html">rename_iea_df_cols</a></span><span class="op">(</span>new_country <span class="op">=</span> <span class="st">"cntry"</span>, new_flow <span class="op">=</span> <span class="st">"flw"</span>, new_product <span class="op">=</span> <span class="st">"prdct"</span><span class="op">)</span>  <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: 14,688</span></span>
<span><span class="co">#&gt; Columns: 5</span></span>
<span><span class="co">#&gt; $ cntry  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Ghana"<span style="color: #949494;">, </span>"Ghana"<span style="color: #949494;">, </span>"Ghana"<span style="color: #949494;">, </span>"Ghana"<span style="color: #949494;">, </span>"Ghana"<span style="color: #949494;">, </span>"Ghana"<span style="color: #949494;">, </span>"Ghana"<span style="color: #949494;">, </span>…</span></span>
<span><span class="co">#&gt; $ flw    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Production"<span style="color: #949494;">, </span>"Production"<span style="color: #949494;">, </span>"Production"<span style="color: #949494;">, </span>"Production"<span style="color: #949494;">, </span>"Produc…</span></span>
<span><span class="co">#&gt; $ prdct  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Hard coal (if no detail)"<span style="color: #949494;">, </span>"Brown coal (if no detail)"<span style="color: #949494;">, </span>"Anthr…</span></span>
<span><span class="co">#&gt; $ `1971` <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>…</span></span>
<span><span class="co">#&gt; $ `2000` <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>…</span></span></code></pre></div>
<p>The default arguments are consistent throughout the
<code>IEATools</code> package. Thus, it is recommended that you use the
default argument values, wherever possible.</p>
</div>
<div class="section level4">
<h4 id="change-to-3-letter-iso-country-abbreviations-use_iso_countries">Change to 3-letter ISO country abbreviations
(<code>use_iso_countries()</code>)<a class="anchor" aria-label="anchor" href="#change-to-3-letter-iso-country-abbreviations-use_iso_countries"></a>
</h4>
<p>To reduce the length of character strings representing countries, the
<code><a href="../reference/use_iso_countries.html">use_iso_countries()</a></code> function replaces country character
strings with each country’s 3-letter abbreviation.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">IEA_data</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/rename_iea_df_cols.html">rename_iea_df_cols</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/use_iso_countries.html">use_iso_countries</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: 14,688</span></span>
<span><span class="co">#&gt; Columns: 5</span></span>
<span><span class="co">#&gt; $ Country <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "GHA"<span style="color: #949494;">, </span>"GHA"<span style="color: #949494;">, </span>"GHA"<span style="color: #949494;">, </span>"GHA"<span style="color: #949494;">, </span>"GHA"<span style="color: #949494;">, </span>"GHA"<span style="color: #949494;">, </span>"GHA"<span style="color: #949494;">, </span>"GHA"<span style="color: #949494;">, </span>"GHA"<span style="color: #949494;">,</span>…</span></span>
<span><span class="co">#&gt; $ Flow    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Production"<span style="color: #949494;">, </span>"Production"<span style="color: #949494;">, </span>"Production"<span style="color: #949494;">, </span>"Production"<span style="color: #949494;">, </span>"Produ…</span></span>
<span><span class="co">#&gt; $ Product <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Hard coal (if no detail)"<span style="color: #949494;">, </span>"Brown coal (if no detail)"<span style="color: #949494;">, </span>"Anth…</span></span>
<span><span class="co">#&gt; $ `1971`  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">,</span>…</span></span>
<span><span class="co">#&gt; $ `2000`  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">,</span>…</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="remove-aggregation-and-memo-data-remove_agg_memo_flows">Remove aggregation and memo data
(<code>remove_agg_memo_flows()</code>)<a class="anchor" aria-label="anchor" href="#remove-aggregation-and-memo-data-remove_agg_memo_flows"></a>
</h4>
<p>The IEA’s extended energy balances contain many memos and
aggregations in the data itself. For the purposes of manipulations and
calculations, it is often advisable to remove all memos and
aggregations. The <code><a href="../reference/remove_agg_memo_flows.html">remove_agg_memo_flows()</a></code> function performs
that task.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">IEA_data</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/rename_iea_df_cols.html">rename_iea_df_cols</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">Flow</span> <span class="op">==</span> <span class="st">"Total primary energy supply"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: 0</span></span>
<span><span class="co">#&gt; Columns: 5</span></span>
<span><span class="co">#&gt; $ Country <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> </span></span>
<span><span class="co">#&gt; $ Flow    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> </span></span>
<span><span class="co">#&gt; $ Product <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> </span></span>
<span><span class="co">#&gt; $ `1971`  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> </span></span>
<span><span class="co">#&gt; $ `2000`  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co"># Total primary energy supply is an aggregation row,</span></span>
<span><span class="co"># so its rows should be absent after calling remove_agg_memo_flows().</span></span>
<span><span class="va">IEA_data</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/rename_iea_df_cols.html">rename_iea_df_cols</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/remove_agg_memo_flows.html">remove_agg_memo_flows</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">Flow</span> <span class="op">==</span> <span class="st">"Total primary energy supply"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] Country Flow    Product 1971    2000   </span></span>
<span><span class="co">#&gt; &lt;0 rows&gt; (or 0-length row.names)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="augment-with-ledger-side-and-aggregation-point-information-augment_iea_df">Augment with ledger side and aggregation point information
(<code>augment_iea_df()</code>)<a class="anchor" aria-label="anchor" href="#augment-with-ledger-side-and-aggregation-point-information-augment_iea_df"></a>
</h4>
<p>The IEA’s extended energy balance data can be confusing for
first-time users to understand. In particular, both</p>
<ol style="list-style-type: lower-alpha">
<li>the demarcation between the supply and consumption sides of the
ledger and</li>
<li>how data should be aggregated</li>
</ol>
<p>are unclear.</p>
<p>To clarify these issues and make later aggregation calculations
possible, call the <code>augment_iea_data()</code> function.
<code><a href="../reference/augment_iea_df.html">augment_iea_df()</a></code> has many default arguments that work fine
for as-delivered IEA extended energy balance data in kilotons of oil
equivalent units. <code><a href="../reference/augment_iea_df.html">augment_iea_df()</a></code> adds new columns
<code>Ledger.side</code>, <code>Flow.aggregation.point</code>,
<code>Energy.type</code>, and <code>Unit</code>.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">IEA_data</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/rename_iea_df_cols.html">rename_iea_df_cols</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/augment_iea_df.html">augment_iea_df</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: 14,688</span></span>
<span><span class="co">#&gt; Columns: 11</span></span>
<span><span class="co">#&gt; $ Country              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Ghana"<span style="color: #949494;">, </span>"Ghana"<span style="color: #949494;">, </span>"Ghana"<span style="color: #949494;">, </span>"Ghana"<span style="color: #949494;">, </span>"Ghana"<span style="color: #949494;">, </span>"Gha…</span></span>
<span><span class="co">#&gt; $ Method               <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "PCM"<span style="color: #949494;">, </span>"PCM"<span style="color: #949494;">, </span>"PCM"<span style="color: #949494;">, </span>"PCM"<span style="color: #949494;">, </span>"PCM"<span style="color: #949494;">, </span>"PCM"<span style="color: #949494;">, </span>"PCM"<span style="color: #949494;">, </span>…</span></span>
<span><span class="co">#&gt; $ EnergyType           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "E"<span style="color: #949494;">, </span>"E"<span style="color: #949494;">, </span>"E"<span style="color: #949494;">, </span>"E"<span style="color: #949494;">, </span>"E"<span style="color: #949494;">, </span>"E"<span style="color: #949494;">, </span>"E"<span style="color: #949494;">, </span>"E"<span style="color: #949494;">, </span>"E"<span style="color: #949494;">, </span>"E"<span style="color: #949494;">,</span>…</span></span>
<span><span class="co">#&gt; $ LastStage            <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Final"<span style="color: #949494;">, </span>"Final"<span style="color: #949494;">, </span>"Final"<span style="color: #949494;">, </span>"Final"<span style="color: #949494;">, </span>"Final"<span style="color: #949494;">, </span>"Fin…</span></span>
<span><span class="co">#&gt; $ LedgerSide           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Supply"<span style="color: #949494;">, </span>"Supply"<span style="color: #949494;">, </span>"Supply"<span style="color: #949494;">, </span>"Supply"<span style="color: #949494;">, </span>"Supply"<span style="color: #949494;">,</span>…</span></span>
<span><span class="co">#&gt; $ FlowAggregationPoint <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Total primary energy supply"<span style="color: #949494;">, </span>"Total primary ene…</span></span>
<span><span class="co">#&gt; $ Flow                 <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Production"<span style="color: #949494;">, </span>"Production"<span style="color: #949494;">, </span>"Production"<span style="color: #949494;">, </span>"Produc…</span></span>
<span><span class="co">#&gt; $ Product              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Hard coal (if no detail)"<span style="color: #949494;">, </span>"Brown coal (if no de…</span></span>
<span><span class="co">#&gt; $ Unit                 <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "TJ"<span style="color: #949494;">, </span>"TJ"<span style="color: #949494;">, </span>"TJ"<span style="color: #949494;">, </span>"TJ"<span style="color: #949494;">, </span>"TJ"<span style="color: #949494;">, </span>"TJ"<span style="color: #949494;">, </span>"TJ"<span style="color: #949494;">, </span>"TJ"<span style="color: #949494;">, </span>"…</span></span>
<span><span class="co">#&gt; $ `1971`               <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0…</span></span>
<span><span class="co">#&gt; $ `2000`               <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0…</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="convert-to-a-tidy-data-frame-tidy_iea_df">Convert to a tidy data frame (<code>tidy_iea_df()</code>)<a class="anchor" aria-label="anchor" href="#convert-to-a-tidy-data-frame-tidy_iea_df"></a>
</h4>
<p>The <a href="https://doi.org/10.18637/jss.v059.i10" class="external-link">tidy format</a>
is a data frame where each datum is located on its own row and columns
provide metadata for each datum. As delivered, the IEA’s data are not
tidy: years are spread to the right rather than being a single column.
The <code><a href="../reference/tidy_iea_df.html">tidy_iea_df()</a></code> function converts to a tidy format. By
default, <code><a href="../reference/tidy_iea_df.html">tidy_iea_df()</a></code> removes zeroes from the data frame,
thereby reducing memory footprint.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">Tidy_IEA_df</span> <span class="op">&lt;-</span> <span class="va">IEA_data</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/rename_iea_df_cols.html">rename_iea_df_cols</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/use_iso_countries.html">use_iso_countries</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/remove_agg_memo_flows.html">remove_agg_memo_flows</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/augment_iea_df.html">augment_iea_df</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/tidy_iea_df.html">tidy_iea_df</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">Tidy_IEA_df</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: 403</span></span>
<span><span class="co">#&gt; Columns: 11</span></span>
<span><span class="co">#&gt; $ Country              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "GHA"<span style="color: #949494;">, </span>"GHA"<span style="color: #949494;">, </span>"GHA"<span style="color: #949494;">, </span>"GHA"<span style="color: #949494;">, </span>"GHA"<span style="color: #949494;">, </span>"GHA"<span style="color: #949494;">, </span>"GHA"<span style="color: #949494;">, </span>…</span></span>
<span><span class="co">#&gt; $ Method               <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "PCM"<span style="color: #949494;">, </span>"PCM"<span style="color: #949494;">, </span>"PCM"<span style="color: #949494;">, </span>"PCM"<span style="color: #949494;">, </span>"PCM"<span style="color: #949494;">, </span>"PCM"<span style="color: #949494;">, </span>"PCM"<span style="color: #949494;">, </span>…</span></span>
<span><span class="co">#&gt; $ EnergyType           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "E"<span style="color: #949494;">, </span>"E"<span style="color: #949494;">, </span>"E"<span style="color: #949494;">, </span>"E"<span style="color: #949494;">, </span>"E"<span style="color: #949494;">, </span>"E"<span style="color: #949494;">, </span>"E"<span style="color: #949494;">, </span>"E"<span style="color: #949494;">, </span>"E"<span style="color: #949494;">, </span>"E"<span style="color: #949494;">,</span>…</span></span>
<span><span class="co">#&gt; $ LastStage            <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Final"<span style="color: #949494;">, </span>"Final"<span style="color: #949494;">, </span>"Final"<span style="color: #949494;">, </span>"Final"<span style="color: #949494;">, </span>"Final"<span style="color: #949494;">, </span>"Fin…</span></span>
<span><span class="co">#&gt; $ Year                 <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 1971<span style="color: #949494;">, </span>2000<span style="color: #949494;">, </span>1971<span style="color: #949494;">, </span>2000<span style="color: #949494;">, </span>1971<span style="color: #949494;">, </span>2000<span style="color: #949494;">, </span>2000<span style="color: #949494;">, </span>2000<span style="color: #949494;">, </span>1…</span></span>
<span><span class="co">#&gt; $ LedgerSide           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Supply"<span style="color: #949494;">, </span>"Supply"<span style="color: #949494;">, </span>"Supply"<span style="color: #949494;">, </span>"Supply"<span style="color: #949494;">, </span>"Supply"<span style="color: #949494;">,</span>…</span></span>
<span><span class="co">#&gt; $ FlowAggregationPoint <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Total primary energy supply"<span style="color: #949494;">, </span>"Total primary ene…</span></span>
<span><span class="co">#&gt; $ Flow                 <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Production"<span style="color: #949494;">, </span>"Production"<span style="color: #949494;">, </span>"Production"<span style="color: #949494;">, </span>"Produc…</span></span>
<span><span class="co">#&gt; $ Product              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Primary solid biofuels"<span style="color: #949494;">, </span>"Primary solid biofuels…</span></span>
<span><span class="co">#&gt; $ Unit                 <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "TJ"<span style="color: #949494;">, </span>"TJ"<span style="color: #949494;">, </span>"TJ"<span style="color: #949494;">, </span>"TJ"<span style="color: #949494;">, </span>"TJ"<span style="color: #949494;">, </span>"TJ"<span style="color: #949494;">, </span>"TJ"<span style="color: #949494;">, </span>"TJ"<span style="color: #949494;">, </span>"…</span></span>
<span><span class="co">#&gt; $ Edot                 <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 87399.9985<span style="color: #949494;">, </span>162908.9993<span style="color: #949494;">, </span>10472.4010<span style="color: #949494;">, </span>23792.3995<span style="color: #949494;">, </span>…</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="the-load_tidy_iea_df-function">The <code>load_tidy_iea_df()</code> function<a class="anchor" aria-label="anchor" href="#the-load_tidy_iea_df-function"></a>
</h3>
<p>For simplicity, all steps above are rolled into
<code><a href="../reference/load_tidy_iea_df.html">load_tidy_iea_df()</a></code>. By default,
<code><a href="../reference/load_tidy_iea_df.html">load_tidy_iea_df()</a></code> loads the sample data bundled with the
package and converts it to a tidy IEA data frame, assuming default
arguments for all functions. But you can supply the path to any IEA data
file in the <code>.iea_file</code> argument to
<code><a href="../reference/load_tidy_iea_df.html">load_tidy_iea_df()</a></code>.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">Simple</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/load_tidy_iea_df.html">load_tidy_iea_df</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">Complicated</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sample_iea_data_path.html">sample_iea_data_path</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/iea_df.html">iea_df</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/rename_iea_df_cols.html">rename_iea_df_cols</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/remove_agg_memo_flows.html">remove_agg_memo_flows</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/use_iso_countries.html">use_iso_countries</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/augment_iea_df.html">augment_iea_df</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/tidy_iea_df.html">tidy_iea_df</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/all.html" class="external-link">all</a></span><span class="op">(</span><span class="va">Simple</span> <span class="op">==</span> <span class="va">Complicated</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span></code></pre></div>
<p>At this point, the integrity of the IEA data can be checked.</p>
</div>
<div class="section level3">
<h3 id="check-energy-balances">Check energy balances<a class="anchor" aria-label="anchor" href="#check-energy-balances"></a>
</h3>
<p>The IEA extended energy balance data are usually close to balanced,
but not quite. To check the integrity of the energy balances, use the
<code><a href="../reference/calc_tidy_iea_df_balances.html">calc_tidy_iea_df_balances()</a></code> function.
<code><a href="../reference/calc_tidy_iea_df_balances.html">calc_tidy_iea_df_balances()</a></code> adds several new columns to the
tidy IEA data frame, including:</p>
<ul>
<li>
<code>supply_sum</code> (the sum of all flows on the supply side of
the ledger),</li>
<li>
<code>consumption_sum</code> (the sum of all flows on the
consumption side of the ledger),</li>
<li>
<code>supply_minus_consumption</code> (the difference between supply
and consumption),</li>
<li>
<code>balance_OK</code> (a logical telling whether the energy
balance is acceptable), and</li>
<li>
<code>err</code> (supply sum when <code>consumption_sum</code> is
<code>NA</code> or <code>supply_minus_consumption</code> when
<code>consumption_sum</code> is not <code>NA</code>).</li>
</ul>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">Balances</span> <span class="op">&lt;-</span> <span class="va">Tidy_IEA_df</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/calc_tidy_iea_df_balances.html">calc_tidy_iea_df_balances</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">Balances</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: 78</span></span>
<span><span class="co">#&gt; Columns: 12</span></span>
<span><span class="co">#&gt; $ Country                  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "GHA"<span style="color: #949494;">, </span>"GHA"<span style="color: #949494;">, </span>"GHA"<span style="color: #949494;">, </span>"GHA"<span style="color: #949494;">, </span>"GHA"<span style="color: #949494;">, </span>"GHA"<span style="color: #949494;">, </span>"GH…</span></span>
<span><span class="co">#&gt; $ Method                   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "PCM"<span style="color: #949494;">, </span>"PCM"<span style="color: #949494;">, </span>"PCM"<span style="color: #949494;">, </span>"PCM"<span style="color: #949494;">, </span>"PCM"<span style="color: #949494;">, </span>"PCM"<span style="color: #949494;">, </span>"PC…</span></span>
<span><span class="co">#&gt; $ EnergyType               <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "E"<span style="color: #949494;">, </span>"E"<span style="color: #949494;">, </span>"E"<span style="color: #949494;">, </span>"E"<span style="color: #949494;">, </span>"E"<span style="color: #949494;">, </span>"E"<span style="color: #949494;">, </span>"E"<span style="color: #949494;">, </span>"E"<span style="color: #949494;">, </span>"E"<span style="color: #949494;">, </span>…</span></span>
<span><span class="co">#&gt; $ LastStage                <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Final"<span style="color: #949494;">, </span>"Final"<span style="color: #949494;">, </span>"Final"<span style="color: #949494;">, </span>"Final"<span style="color: #949494;">, </span>"Final"<span style="color: #949494;">, </span>…</span></span>
<span><span class="co">#&gt; $ Year                     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 1971<span style="color: #949494;">, </span>1971<span style="color: #949494;">, </span>1971<span style="color: #949494;">, </span>1971<span style="color: #949494;">, </span>1971<span style="color: #949494;">, </span>1971<span style="color: #949494;">, </span>1971<span style="color: #949494;">, </span>197…</span></span>
<span><span class="co">#&gt; $ Product                  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Aviation gasoline"<span style="color: #949494;">, </span>"Charcoal"<span style="color: #949494;">, </span>"Crude oil"<span style="color: #949494;">,</span>…</span></span>
<span><span class="co">#&gt; $ Unit                     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "TJ"<span style="color: #949494;">, </span>"TJ"<span style="color: #949494;">, </span>"TJ"<span style="color: #949494;">, </span>"TJ"<span style="color: #949494;">, </span>"TJ"<span style="color: #949494;">, </span>"TJ"<span style="color: #949494;">, </span>"TJ"<span style="color: #949494;">, </span>"TJ…</span></span>
<span><span class="co">#&gt; $ supply_sum               <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 0.0000<span style="color: #949494;">, </span>4989.5980<span style="color: #949494;">, </span>-0.0001<span style="color: #949494;">, </span>9845.9971<span style="color: #949494;">, </span>3979.8…</span></span>
<span><span class="co">#&gt; $ consumption_sum          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span>4989.5980<span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span>9846.0055<span style="color: #949494;">, </span>3979.8004<span style="color: #949494;">, </span>9136…</span></span>
<span><span class="co">#&gt; $ supply_minus_consumption <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span>0.000000e+00<span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span>-8.400000e-03<span style="color: #949494;">, </span>-1.00000…</span></span>
<span><span class="co">#&gt; $ balance_OK               <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span> TRUE<span style="color: #949494;">, </span>TRUE<span style="color: #949494;">, </span>FALSE<span style="color: #949494;">, </span>FALSE<span style="color: #949494;">, </span>FALSE<span style="color: #949494;">, </span>FALSE<span style="color: #949494;">, </span>TRUE<span style="color: #949494;">,</span>…</span></span>
<span><span class="co">#&gt; $ err                      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 0.000000e+00<span style="color: #949494;">, </span>0.000000e+00<span style="color: #949494;">, </span>-1.000000e-04<span style="color: #949494;">, </span>-8…</span></span>
<span><span class="va">Balances</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/tidy_iea_df_balanced.html">tidy_iea_df_balanced</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] FALSE</span></span></code></pre></div>
<p>Notice that the IEA data are not quite energy balanced. To fix the
energy balance, use the <code><a href="../reference/fix_tidy_iea_df_balances.html">fix_tidy_iea_df_balances()</a></code>
function. <code><a href="../reference/fix_tidy_iea_df_balances.html">fix_tidy_iea_df_balances()</a></code> adjusts the
<code>Statistical differences</code> flow to achieve perfect energy
balance.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Fix product-level balances within each country</span></span>
<span><span class="va">Tidy_IEA_df</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/fix_tidy_iea_df_balances.html">fix_tidy_iea_df_balances</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/calc_tidy_iea_df_balances.html">calc_tidy_iea_df_balances</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: 78</span></span>
<span><span class="co">#&gt; Columns: 12</span></span>
<span><span class="co">#&gt; $ Country                  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "GHA"<span style="color: #949494;">, </span>"GHA"<span style="color: #949494;">, </span>"GHA"<span style="color: #949494;">, </span>"GHA"<span style="color: #949494;">, </span>"GHA"<span style="color: #949494;">, </span>"GHA"<span style="color: #949494;">, </span>"GH…</span></span>
<span><span class="co">#&gt; $ Method                   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "PCM"<span style="color: #949494;">, </span>"PCM"<span style="color: #949494;">, </span>"PCM"<span style="color: #949494;">, </span>"PCM"<span style="color: #949494;">, </span>"PCM"<span style="color: #949494;">, </span>"PCM"<span style="color: #949494;">, </span>"PC…</span></span>
<span><span class="co">#&gt; $ EnergyType               <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "E"<span style="color: #949494;">, </span>"E"<span style="color: #949494;">, </span>"E"<span style="color: #949494;">, </span>"E"<span style="color: #949494;">, </span>"E"<span style="color: #949494;">, </span>"E"<span style="color: #949494;">, </span>"E"<span style="color: #949494;">, </span>"E"<span style="color: #949494;">, </span>"E"<span style="color: #949494;">, </span>…</span></span>
<span><span class="co">#&gt; $ LastStage                <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Final"<span style="color: #949494;">, </span>"Final"<span style="color: #949494;">, </span>"Final"<span style="color: #949494;">, </span>"Final"<span style="color: #949494;">, </span>"Final"<span style="color: #949494;">, </span>…</span></span>
<span><span class="co">#&gt; $ Year                     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 1971<span style="color: #949494;">, </span>1971<span style="color: #949494;">, </span>1971<span style="color: #949494;">, </span>1971<span style="color: #949494;">, </span>1971<span style="color: #949494;">, </span>1971<span style="color: #949494;">, </span>1971<span style="color: #949494;">, </span>197…</span></span>
<span><span class="co">#&gt; $ Product                  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Aviation gasoline"<span style="color: #949494;">, </span>"Charcoal"<span style="color: #949494;">, </span>"Crude oil"<span style="color: #949494;">,</span>…</span></span>
<span><span class="co">#&gt; $ Unit                     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "TJ"<span style="color: #949494;">, </span>"TJ"<span style="color: #949494;">, </span>"TJ"<span style="color: #949494;">, </span>"TJ"<span style="color: #949494;">, </span>"TJ"<span style="color: #949494;">, </span>"TJ"<span style="color: #949494;">, </span>"TJ"<span style="color: #949494;">, </span>"TJ…</span></span>
<span><span class="co">#&gt; $ supply_sum               <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 0.0000<span style="color: #949494;">, </span>4989.5980<span style="color: #949494;">, </span>0.0000<span style="color: #949494;">, </span>9846.0055<span style="color: #949494;">, </span>3979.80…</span></span>
<span><span class="co">#&gt; $ consumption_sum          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span>4989.5980<span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span>9846.0055<span style="color: #949494;">, </span>3979.8004<span style="color: #949494;">, </span>9136…</span></span>
<span><span class="co">#&gt; $ supply_minus_consumption <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span>0.000000e+00<span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span>0.000000e+00<span style="color: #949494;">, </span>0.000000e…</span></span>
<span><span class="co">#&gt; $ balance_OK               <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span> TRUE<span style="color: #949494;">, </span>TRUE<span style="color: #949494;">, </span>TRUE<span style="color: #949494;">, </span>TRUE<span style="color: #949494;">, </span>TRUE<span style="color: #949494;">, </span>TRUE<span style="color: #949494;">, </span>TRUE<span style="color: #949494;">, </span>TRU…</span></span>
<span><span class="co">#&gt; $ err                      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 0.000000e+00<span style="color: #949494;">, </span>0.000000e+00<span style="color: #949494;">, </span>0.000000e+00<span style="color: #949494;">, </span>0.0…</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="sorting">Sorting<a class="anchor" aria-label="anchor" href="#sorting"></a>
</h3>
<p>When manipulating IEA data frames, rows may attain different sorting
relative to the standard IEA order. The <code><a href="../reference/sort_iea_df.html">sort_iea_df()</a></code>
function can return a data frame to IEA sort order.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span>  <span class="va">Tidy_IEA_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/load_tidy_iea_df.html">load_tidy_iea_df</a></span><span class="op">(</span><span class="op">)</span></span>
<span>  <span class="va">Tidy_IEA_df</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">Year</span>, <span class="va">Flow</span>, <span class="va">Product</span>, <span class="va">Edot</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 403 × 4</span></span></span>
<span><span class="co">#&gt;     Year Flow       Product                             Edot</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                              <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>  <span style="text-decoration: underline;">1</span>971 Production Primary solid biofuels           <span style="text-decoration: underline;">87</span>400. </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>  <span style="text-decoration: underline;">2</span>000 Production Primary solid biofuels          <span style="text-decoration: underline;">162</span>909. </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>  <span style="text-decoration: underline;">1</span>971 Production Hydro                            <span style="text-decoration: underline;">10</span>472. </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>  <span style="text-decoration: underline;">2</span>000 Production Hydro                            <span style="text-decoration: underline;">23</span>792. </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>  <span style="text-decoration: underline;">1</span>971 Imports    Crude oil                        <span style="text-decoration: underline;">38</span>360. </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>  <span style="text-decoration: underline;">2</span>000 Imports    Crude oil                        <span style="text-decoration: underline;">54</span>769. </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>  <span style="text-decoration: underline;">2</span>000 Imports    Liquefied petroleum gases (LPG)   <span style="text-decoration: underline;">1</span>655. </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>  <span style="text-decoration: underline;">2</span>000 Imports    Motor gasoline excl. biofuels    <span style="text-decoration: underline;">18</span>010. </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>  <span style="text-decoration: underline;">1</span>971 Imports    Aviation gasoline                   44.8</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>  <span style="text-decoration: underline;">2</span>000 Imports    Aviation gasoline                  224. </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 393 more rows</span></span></span>
<span>  <span class="co"># Move the first row to the bottom to put everything out of order</span></span>
<span>  <span class="va">Unsorted</span> <span class="op">&lt;-</span> <span class="va">Tidy_IEA_df</span><span class="op">[</span><span class="op">-</span><span class="fl">1</span>, <span class="op">]</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html" class="external-link">bind_rows</a></span><span class="op">(</span><span class="va">Tidy_IEA_df</span><span class="op">[</span><span class="fl">1</span>, <span class="op">]</span><span class="op">)</span></span>
<span>  <span class="va">Unsorted</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">Year</span>, <span class="va">Flow</span>, <span class="va">Product</span>, <span class="va">Edot</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 403 × 4</span></span></span>
<span><span class="co">#&gt;     Year Flow       Product                                   Edot</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>  <span style="text-decoration: underline;">2</span>000 Production Primary solid biofuels                <span style="text-decoration: underline;">162</span>909. </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>  <span style="text-decoration: underline;">1</span>971 Production Hydro                                  <span style="text-decoration: underline;">10</span>472. </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>  <span style="text-decoration: underline;">2</span>000 Production Hydro                                  <span style="text-decoration: underline;">23</span>792. </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>  <span style="text-decoration: underline;">1</span>971 Imports    Crude oil                              <span style="text-decoration: underline;">38</span>360. </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>  <span style="text-decoration: underline;">2</span>000 Imports    Crude oil                              <span style="text-decoration: underline;">54</span>769. </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>  <span style="text-decoration: underline;">2</span>000 Imports    Liquefied petroleum gases (LPG)         <span style="text-decoration: underline;">1</span>655. </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>  <span style="text-decoration: underline;">2</span>000 Imports    Motor gasoline excl. biofuels          <span style="text-decoration: underline;">18</span>010. </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>  <span style="text-decoration: underline;">1</span>971 Imports    Aviation gasoline                         44.8</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>  <span style="text-decoration: underline;">2</span>000 Imports    Aviation gasoline                        224. </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>  <span style="text-decoration: underline;">1</span>971 Imports    Kerosene type jet fuel excl. biofuels    892. </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 393 more rows</span></span></span>
<span>  <span class="co"># Now sort it to put everything right again</span></span>
<span>  <span class="va">Sorted</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sort_iea_df.html">sort_iea_df</a></span><span class="op">(</span><span class="va">Unsorted</span><span class="op">)</span></span>
<span>  <span class="va">Sorted</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">Year</span>, <span class="va">Flow</span>, <span class="va">Product</span>, <span class="va">Edot</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 403 × 4</span></span></span>
<span><span class="co">#&gt;     Year Flow       Product                                  Edot</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>  <span style="text-decoration: underline;">1</span>971 Production Primary solid biofuels                <span style="text-decoration: underline;">87</span>400. </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>  <span style="text-decoration: underline;">1</span>971 Production Hydro                                 <span style="text-decoration: underline;">10</span>472. </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>  <span style="text-decoration: underline;">1</span>971 Imports    Crude oil                             <span style="text-decoration: underline;">38</span>360. </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>  <span style="text-decoration: underline;">1</span>971 Imports    Aviation gasoline                        44.8</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>  <span style="text-decoration: underline;">1</span>971 Imports    Kerosene type jet fuel excl. biofuels   892. </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>  <span style="text-decoration: underline;">1</span>971 Imports    Other kerosene                           43.8</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>  <span style="text-decoration: underline;">1</span>971 Imports    Lubricants                              756. </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>  <span style="text-decoration: underline;">1</span>971 Exports    Motor gasoline excl. biofuels          -<span style="color: #BB0000;">179.</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>  <span style="text-decoration: underline;">1</span>971 Exports    Other kerosene                         -<span style="color: #BB0000;">175.</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>  <span style="text-decoration: underline;">1</span>971 Exports    Fuel oil                              -<span style="color: #BB0000; text-decoration: underline;">7</span><span style="color: #BB0000;">437.</span> </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 393 more rows</span></span></span></code></pre></div>
<p><code><a href="../reference/sort_iea_df.html">sort_iea_df()</a></code> also works with wide data frames in which
years are spread to the right.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span>  <span class="co"># Pivoting the data results in unconventional ordering</span></span>
<span>  <span class="va">Unsorted_wide</span> <span class="op">&lt;-</span> <span class="va">Tidy_IEA_df</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_wider.html" class="external-link">pivot_wider</a></span><span class="op">(</span>names_from <span class="op">=</span> <span class="va">Year</span>, values_from <span class="op">=</span> <span class="va">Edot</span><span class="op">)</span></span>
<span>  <span class="va">Unsorted_wide</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">Flow</span>, <span class="va">Product</span>, <span class="va">`1971`</span>, <span class="va">`2000`</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 294 × 4</span></span></span>
<span><span class="co">#&gt;    Flow       Product                                `1971`  `2000`</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> Production Primary solid biofuels                <span style="text-decoration: underline;">87</span>400.  <span style="text-decoration: underline;">162</span>909.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> Production Hydro                                 <span style="text-decoration: underline;">10</span>472.   <span style="text-decoration: underline;">23</span>792.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> Imports    Crude oil                             <span style="text-decoration: underline;">38</span>360.   <span style="text-decoration: underline;">54</span>769.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> Imports    Liquefied petroleum gases (LPG)          <span style="color: #BB0000;">NA</span>     <span style="text-decoration: underline;">1</span>655.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> Imports    Motor gasoline excl. biofuels            <span style="color: #BB0000;">NA</span>    <span style="text-decoration: underline;">18</span>010.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> Imports    Aviation gasoline                        44.8    224.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> Imports    Kerosene type jet fuel excl. biofuels   892.    <span style="text-decoration: underline;">1</span>338.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> Imports    Other kerosene                           43.8     <span style="color: #BB0000;">NA</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> Imports    Gas/diesel oil excl. biofuels            <span style="color: #BB0000;">NA</span>    <span style="text-decoration: underline;">17</span>104.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> Imports    Lubricants                              756.    <span style="text-decoration: underline;">1</span>218.</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 284 more rows</span></span></span>
<span>  <span class="co"># The wide data frame is not sorted correctly. Sort it.</span></span>
<span>  <span class="va">Sorted_wide</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sort_iea_df.html">sort_iea_df</a></span><span class="op">(</span><span class="va">Unsorted_wide</span><span class="op">)</span></span>
<span>  <span class="va">Sorted_wide</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">Flow</span>, <span class="va">Product</span>, <span class="va">`1971`</span>, <span class="va">`2000`</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 294 × 4</span></span></span>
<span><span class="co">#&gt;    Flow       Product                                `1971`  `2000`</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> Production Primary solid biofuels                <span style="text-decoration: underline;">87</span>400.  <span style="text-decoration: underline;">162</span>909.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> Production Hydro                                 <span style="text-decoration: underline;">10</span>472.   <span style="text-decoration: underline;">23</span>792.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> Imports    Crude oil                             <span style="text-decoration: underline;">38</span>360.   <span style="text-decoration: underline;">54</span>769.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> Imports    Liquefied petroleum gases (LPG)          <span style="color: #BB0000;">NA</span>     <span style="text-decoration: underline;">1</span>655.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> Imports    Motor gasoline excl. biofuels            <span style="color: #BB0000;">NA</span>    <span style="text-decoration: underline;">18</span>010.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> Imports    Aviation gasoline                        44.8    224.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> Imports    Kerosene type jet fuel excl. biofuels   892.    <span style="text-decoration: underline;">1</span>338.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> Imports    Other kerosene                           43.8     <span style="color: #BB0000;">NA</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> Imports    Gas/diesel oil excl. biofuels            <span style="color: #BB0000;">NA</span>    <span style="text-decoration: underline;">17</span>104.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> Imports    Lubricants                              756.    <span style="text-decoration: underline;">1</span>218.</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 284 more rows</span></span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="conclusion">Conclusion<a class="anchor" aria-label="anchor" href="#conclusion"></a>
</h2>
<p>At this point, IEA extended energy balance data have been imported to
<code>R</code> and are ready to be used. The next step could be to
specify some of the IEA energy flows. See the <a href="https://matthewheun.github.io/IEATools/articles/specify.html">specify</a>
vignette for details.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Matthew Kuperus Heun, Emmanuel Aramendia, Zeke Marshall.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.2.</p>
</div>

    </footer>
</div>





  </body>
</html>

<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Final to Useful Analysis • IEATools</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Final to Useful Analysis">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">IEATools</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.8</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/IEATools.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/final_to_useful.html">Final to Useful Analysis</a>
    </li>
    <li>
      <a href="../articles/prep_psut.html">Prepare for PSUT analysis</a>
    </li>
    <li>
      <a href="../articles/specify.html">Specify EIOU Industries and Flows</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Final to Useful Analysis</h1>
                        <h4 class="author">Matthew Kuperus Heun</h4>
            
            <h4 class="date">2019-07-24</h4>
      
      
      <div class="hidden name"><code>final_to_useful.Rmd</code></div>

    </div>

    
    
<div id="introduction" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h2>
<p>Extended energy balance data from the <a href="https://www.iea.org">International Energy Agency (IEA)</a> provides both primary and final energy information. (Primary energy is extracted from the biosphere, and final energy is sold to consumers.) But consumers don’t buy final energy for its own sake. They buy final energy so they can convert it to useful energy (heat, light, work) that, when combined with infrastrucure (buildings, roads, etc.), provides energy services (heated and cooled space, passenger and freight transport, etc.).</p>
<p>So some energy conversion chain analyses extend the final energy provided by the IEA to useful energy through a process that involves</p>
<ol style="list-style-type: lower-alpha">
<li>allocating final energy to final-to-useful energy conversion machines,</li>
<li>defining the efficiency of those final-to-useful energy conversion machines, and</li>
<li>calculating the useful energy injected into the the final demand economic sectors.</li>
</ol>
<p>The <code>IEATools</code> package provides several functions to assist with the final-to-useful analysis process, and this vignette demonstrates their use.</p>
</div>
<div id="allocation" class="section level2">
<h2 class="hasAnchor">
<a href="#allocation" class="anchor"></a>Allocation</h2>
<p>Extending the IEA’s extended energy balance data to the useful stage begins with defining allocations from final energy carriers to final-to-useful energy conversion machines. To demonstrate this process, we’ll use the sample IEA data bundled with this package.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(dplyr)</a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(IEATools)</a>
<a class="sourceLine" id="cb1-3" data-line-number="3">Tidy_iea_data &lt;-<span class="st"> </span><span class="kw"><a href="../reference/load_tidy_iea_df.html">load_tidy_iea_df</a></span>() <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb1-4" data-line-number="4"><span class="st">  </span><span class="kw"><a href="../reference/specify_all.html">specify_all</a></span>() <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb1-5" data-line-number="5"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/reexports.html">glimpse</a></span>()</a>
<a class="sourceLine" id="cb1-6" data-line-number="6"><span class="co">#&gt; Observations: 404</span></a>
<a class="sourceLine" id="cb1-7" data-line-number="7"><span class="co">#&gt; Variables: 11</span></a>
<a class="sourceLine" id="cb1-8" data-line-number="8"><span class="co">#&gt; $ Country                &lt;chr&gt; "GHA", "GHA", "GHA", "GHA", "GHA", "GHA",…</span></a>
<a class="sourceLine" id="cb1-9" data-line-number="9"><span class="co">#&gt; $ Method                 &lt;chr&gt; "PCM", "PCM", "PCM", "PCM", "PCM", "PCM",…</span></a>
<a class="sourceLine" id="cb1-10" data-line-number="10"><span class="co">#&gt; $ Energy.type            &lt;chr&gt; "E", "E", "E", "E", "E", "E", "E", "E", "…</span></a>
<a class="sourceLine" id="cb1-11" data-line-number="11"><span class="co">#&gt; $ Last.stage             &lt;chr&gt; "Final", "Final", "Final", "Final", "Fina…</span></a>
<a class="sourceLine" id="cb1-12" data-line-number="12"><span class="co">#&gt; $ Year                   &lt;dbl&gt; 1971, 1971, 1971, 1971, 1971, 1971, 1971,…</span></a>
<a class="sourceLine" id="cb1-13" data-line-number="13"><span class="co">#&gt; $ Ledger.side            &lt;chr&gt; "Consumption", "Consumption", "Consumptio…</span></a>
<a class="sourceLine" id="cb1-14" data-line-number="14"><span class="co">#&gt; $ Flow.aggregation.point &lt;chr&gt; "Industry", "Industry", "Industry", "Indu…</span></a>
<a class="sourceLine" id="cb1-15" data-line-number="15"><span class="co">#&gt; $ Flow                   &lt;chr&gt; "Mining and quarrying", "Non-ferrous meta…</span></a>
<a class="sourceLine" id="cb1-16" data-line-number="16"><span class="co">#&gt; $ Product                &lt;chr&gt; "Electricity", "Electricity", "Electricit…</span></a>
<a class="sourceLine" id="cb1-17" data-line-number="17"><span class="co">#&gt; $ Unit                   &lt;chr&gt; "ktoe", "ktoe", "ktoe", "ktoe", "ktoe", "…</span></a>
<a class="sourceLine" id="cb1-18" data-line-number="18"><span class="co">#&gt; $ E.dot                  &lt;dbl&gt; 17, 170, 22, 88, 39, 146, 1, 2, 30, 9, 9,…</span></a></code></pre></div>
<p>The next step is to develop a blank template for final-to-useful allocations. <code><a href="../reference/fu_allocation_template.html">fu_allocation_template()</a></code> builds a final-to-useful allocation template in which the analyst can provide allocation values (<code>C</code>) in percentages.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1">FU_allocation_template &lt;-<span class="st"> </span><span class="kw"><a href="../reference/load_tidy_iea_df.html">load_tidy_iea_df</a></span>() <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/specify_all.html">specify_all</a></span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb2-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="../reference/fu_allocation_template.html">fu_allocation_template</a></span>()</a>
<a class="sourceLine" id="cb2-4" data-line-number="4">FU_allocation_template <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb2-5" data-line-number="5"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/reexports.html">glimpse</a></span>()</a>
<a class="sourceLine" id="cb2-6" data-line-number="6"><span class="co">#&gt; Observations: 690</span></a>
<a class="sourceLine" id="cb2-7" data-line-number="7"><span class="co">#&gt; Variables: 15</span></a>
<a class="sourceLine" id="cb2-8" data-line-number="8"><span class="co">#&gt; $ Country                &lt;chr&gt; "GHA", "GHA", "GHA", "GHA", "GHA", "GHA",…</span></a>
<a class="sourceLine" id="cb2-9" data-line-number="9"><span class="co">#&gt; $ Method                 &lt;chr&gt; "PCM", "PCM", "PCM", "PCM", "PCM", "PCM",…</span></a>
<a class="sourceLine" id="cb2-10" data-line-number="10"><span class="co">#&gt; $ Energy.type            &lt;chr&gt; "E", "E", "E", "E", "E", "E", "E", "E", "…</span></a>
<a class="sourceLine" id="cb2-11" data-line-number="11"><span class="co">#&gt; $ Last.stage             &lt;chr&gt; "Final", "Final", "Final", "Final", "Fina…</span></a>
<a class="sourceLine" id="cb2-12" data-line-number="12"><span class="co">#&gt; $ Ledger.side            &lt;chr&gt; "Supply", "Supply", "Supply", "Supply", "…</span></a>
<a class="sourceLine" id="cb2-13" data-line-number="13"><span class="co">#&gt; $ Flow.aggregation.point &lt;chr&gt; "Energy industry own use", "Energy indust…</span></a>
<a class="sourceLine" id="cb2-14" data-line-number="14"><span class="co">#&gt; $ Unit                   &lt;chr&gt; "ktoe", "ktoe", "ktoe", "ktoe", "ktoe", "…</span></a>
<a class="sourceLine" id="cb2-15" data-line-number="15"><span class="co">#&gt; $ Ef.product             &lt;chr&gt; "Refinery gas", "Refinery gas", "Refinery…</span></a>
<a class="sourceLine" id="cb2-16" data-line-number="16"><span class="co">#&gt; $ Machine                &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…</span></a>
<a class="sourceLine" id="cb2-17" data-line-number="17"><span class="co">#&gt; $ Eu.product             &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…</span></a>
<a class="sourceLine" id="cb2-18" data-line-number="18"><span class="co">#&gt; $ Destination            &lt;chr&gt; "Oil refineries", "Oil refineries", "Oil …</span></a>
<a class="sourceLine" id="cb2-19" data-line-number="19"><span class="co">#&gt; $ Quantity               &lt;chr&gt; "E.dot", "E.dot [%]", "C_1 [%]", "C_2 [%]…</span></a>
<a class="sourceLine" id="cb2-20" data-line-number="20"><span class="co">#&gt; $ Maximum.values         &lt;dbl&gt; 3.900000e+01, 9.090909e-01, NA, NA, NA, 4…</span></a>
<a class="sourceLine" id="cb2-21" data-line-number="21"><span class="co">#&gt; $ `1971`                 &lt;dbl&gt; 2.000000e+01, 9.090909e-01, NA, NA, NA, 2…</span></a>
<a class="sourceLine" id="cb2-22" data-line-number="22"><span class="co">#&gt; $ `2000`                 &lt;dbl&gt; 39.00000000, 0.90697674, NA, NA, NA, 4.00…</span></a></code></pre></div>
<p>To obtain a nicely-formatted Excel spreadsheet, use the <code><a href="../reference/write_fu_allocation_template.html">write_fu_allocation_template()</a></code> function.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="co"># FU_allocation_template %&gt;% </span></a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="co">#   write_fu_allocation_template("~/Desktop/Test_FU_allocation_template.xlsx")</span></a></code></pre></div>
<p>The analyst should complete all of the unshaded cells in the <code>Machine</code> and <code>Eu.product</code> columns. <code>Machine</code> should contain names of final-to-useful machines such as “Automobiles,” “Industrial heat/furnace,” etc. <code>Eu.product</code> should be filled with names of useful energy carriers such as “HTH.600.C”, “MD”, or “Light”. Note that later processing will parse the heat categories for their temperature, and the required format is <code>*TH.nnn.U</code>, where * the first character is arbitrary, but <code>H</code>, <code>M</code>, and <code>L</code> are typical for high, medium, and low temperature heat, respectively, * <code>TH.</code> is required, * <code>nnn</code> can be any number of digits, optionally preceded by a negative sign, * <code>.</code> is required, and * <code>U</code> is the temperature unit, one of <code>C</code>, <code>F</code>, <code>R</code>, or <code>K</code> for ° Celsius, ° Fahrenheit, rankine, or kelvin, respectively.</p>
<p>The <code>C</code> rows representation allocations of <code>E.dot</code> energy to final-to-useful machines for each year of available IEA data. Three allocation rows (<code>C_1 [%]</code>, <code>C_2 [%]</code>, and <code>C_3 [%]</code>) are provided for each combination of <code>Flow.aggregation.point</code>, <code>Ef.product</code>, and <code>Destination</code>. Not all <code>C_i [%]</code> rows need to be filled, and the analyst can add more allocation rows (<code>C_4 [%]</code>, <code>C_5 [%]</code>, …) as required.</p>
<p>The rows are in IEA order for <code>Flow.aggregation.point</code>, <code>Ef.product</code>, and <code>Destination</code>.</p>
<p>The <code>Maximum.values</code> column provides an indication of which <code>Destination</code>s receive more energy than others, allowing the analyst to focus more attention on larger energy flows, as desired.</p>
</div>
<div id="final-to-useful-efficiencies" class="section level2">
<h2 class="hasAnchor">
<a href="#final-to-useful-efficiencies" class="anchor"></a>Final-to-useful efficiencies</h2>
<p>After completing the final-to-useful allocation table, the analyst must specify the efficiencies of the final-to-useful machines. To assist with this task, <code><a href="../reference/eta_fu_template.html">eta_fu_template()</a></code> can be invoked. To demonstrate, we’ll use <code><a href="../reference/load_fu_allocation_data.html">load_fu_allocation_data()</a></code>, a function that reads a completed allocation table out of an excel file. The default <code>path</code> argument of <code><a href="../reference/load_fu_allocation_data.html">load_fu_allocation_data()</a></code> points to a completed final-to-useful allocation table that is provided with <code>IEATools</code>.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1">Eta_fu_template &lt;-<span class="st"> </span><span class="kw"><a href="../reference/load_fu_allocation_data.html">load_fu_allocation_data</a></span>() <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb4-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/eta_fu_template.html">eta_fu_template</a></span>()</a>
<a class="sourceLine" id="cb4-3" data-line-number="3">Eta_fu_template <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb4-4" data-line-number="4"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/reexports.html">glimpse</a></span>()</a>
<a class="sourceLine" id="cb4-5" data-line-number="5"><span class="co">#&gt; Observations: 268</span></a>
<a class="sourceLine" id="cb4-6" data-line-number="6"><span class="co">#&gt; Variables: 11</span></a>
<a class="sourceLine" id="cb4-7" data-line-number="7"><span class="co">#&gt; $ Country        &lt;chr&gt; "GHA", "GHA", "GHA", "GHA", "GHA", "GHA", "GHA", …</span></a>
<a class="sourceLine" id="cb4-8" data-line-number="8"><span class="co">#&gt; $ Method         &lt;chr&gt; "PCM", "PCM", "PCM", "PCM", "PCM", "PCM", "PCM", …</span></a>
<a class="sourceLine" id="cb4-9" data-line-number="9"><span class="co">#&gt; $ Energy.type    &lt;chr&gt; "E", "E", "E", "E", "E", "E", "E", "E", "E", "E",…</span></a>
<a class="sourceLine" id="cb4-10" data-line-number="10"><span class="co">#&gt; $ Last.stage     &lt;chr&gt; "Final", "Final", "Final", "Final", "Final", "Fin…</span></a>
<a class="sourceLine" id="cb4-11" data-line-number="11"><span class="co">#&gt; $ Unit           &lt;chr&gt; "ktoe", "ktoe", "ktoe", "ktoe", "ktoe", "ktoe", "…</span></a>
<a class="sourceLine" id="cb4-12" data-line-number="12"><span class="co">#&gt; $ Machine        &lt;chr&gt; "Automobiles", "Automobiles", "Automobiles", "Aut…</span></a>
<a class="sourceLine" id="cb4-13" data-line-number="13"><span class="co">#&gt; $ Eu.product     &lt;chr&gt; "MD", "MD", "MD", "MD", "MD", "MD", "MD", "MD", "…</span></a>
<a class="sourceLine" id="cb4-14" data-line-number="14"><span class="co">#&gt; $ Quantity       &lt;chr&gt; "E.dot_machine", "E.dot_machine [%]", "eta.fu", "…</span></a>
<a class="sourceLine" id="cb4-15" data-line-number="15"><span class="co">#&gt; $ Maximum.values &lt;dbl&gt; 619.50000000, 0.11540611, NA, NA, 187.50000000, 0…</span></a>
<a class="sourceLine" id="cb4-16" data-line-number="16"><span class="co">#&gt; $ `1971`         &lt;dbl&gt; 2.170000e+02, 8.388094e-02, NA, 1.000000e+00, 5.9…</span></a>
<a class="sourceLine" id="cb4-17" data-line-number="17"><span class="co">#&gt; $ `2000`         &lt;dbl&gt; 619.50000000, 0.11540611, NA, 1.00000000, 187.500…</span></a></code></pre></div>
<p>To obtain a nicely-formatted Excel spreadsheet, use the <code><a href="../reference/write_fu_allocation_template.html">write_fu_allocation_template()</a></code> function.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="co"># Eta_fu_template %&gt;% </span></a>
<a class="sourceLine" id="cb5-2" data-line-number="2"><span class="co">#  write_eta_fu_template("~/Desktop/Test_eta_fu_template.xlsx")</span></a></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#introduction">Introduction</a></li>
      <li><a href="#allocation">Allocation</a></li>
      <li><a href="#final-to-useful-efficiencies">Final-to-useful efficiencies</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Matthew Heun.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>

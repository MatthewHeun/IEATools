<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Specify destinations for energy industry own use flows into transformation processes — specify_tp_eiou • IEATools</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Specify destinations for energy industry own use flows into transformation processes — specify_tp_eiou"><meta name="description" content="The extended energy balance data from the IEA includes
&quot;Energy industry own use&quot; (EIOU) for many transformation processes.
Unfortunately, in some cases
the EIOU flows into industries that aren't included in transformation processes.
For example, &quot;Electricity&quot; is consumed by
&quot;Own use in electricity, CHP and heat plants&quot;,
which is not a transformation process.
We have to make some decisions to ensure that
EIOU is routed to actual transformation processes.
See details for a list of changes made to the .tidy_iea_df data frame."><meta property="og:description" content="The extended energy balance data from the IEA includes
&quot;Energy industry own use&quot; (EIOU) for many transformation processes.
Unfortunately, in some cases
the EIOU flows into industries that aren't included in transformation processes.
For example, &quot;Electricity&quot; is consumed by
&quot;Own use in electricity, CHP and heat plants&quot;,
which is not a transformation process.
We have to make some decisions to ensure that
EIOU is routed to actual transformation processes.
See details for a list of changes made to the .tidy_iea_df data frame."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">IEATools</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.78</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/IEATools.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/final_to_useful.html">Final to Useful Analysis</a></li>
    <li><a class="dropdown-item" href="../articles/fix_iea_data.html">Fixes for IEA Data</a></li>
    <li><a class="dropdown-item" href="../articles/prep_psut.html">Prepare for PSUT analysis</a></li>
    <li><a class="dropdown-item" href="../articles/psut_names.html">PSUT Names</a></li>
    <li><a class="dropdown-item" href="../articles/specify.html">Specify EIOU Industries and Flows</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Specify destinations for energy industry own use flows into transformation processes</h1>

      <div class="d-none name"><code>specify_tp_eiou.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>The extended energy balance data from the IEA includes
"Energy industry own use" (EIOU) for many transformation processes.
Unfortunately, in some cases
the EIOU flows into industries that aren't included in transformation processes.
For example, "Electricity" is consumed by
"Own use in electricity, CHP and heat plants",
which is not a transformation process.
We have to make some decisions to ensure that
EIOU is routed to actual transformation processes.
See details for a list of changes made to the <code>.tidy_iea_df</code> data frame.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">specify_tp_eiou</span><span class="op">(</span></span>
<span>  <span class="va">.tidy_iea_df</span>,</span>
<span>  split_own_use_elect_chp_heat_using_shares_of <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"input"</span>, <span class="st">"output"</span><span class="op">)</span>,</span>
<span>  route_non_specified_eiou <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  route_non_specified_tp <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  specify_renewable_plants <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  specify_electricity_grid <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  specify_distribution_industries <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  ascribe_eiou_to_renewable_plants <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  ascribe_eiou_to_nuclear <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  flow_aggregation_point <span class="op">=</span> <span class="fu">IEATools</span><span class="fu">::</span><span class="va"><a href="iea_cols.html">iea_cols</a></span><span class="op">$</span><span class="va">flow_aggregation_point</span>,</span>
<span>  eiou <span class="op">=</span> <span class="fu">IEATools</span><span class="fu">::</span><span class="va"><a href="tfc_compare_flows.html">tfc_compare_flows</a></span><span class="op">$</span><span class="va">energy_industry_own_use</span>,</span>
<span>  transformation_processes <span class="op">=</span> <span class="fu">IEATools</span><span class="fu">::</span><span class="va"><a href="tfc_compare_flows.html">tfc_compare_flows</a></span><span class="op">$</span><span class="va">transformation_processes</span>,</span>
<span>  flow <span class="op">=</span> <span class="fu">IEATools</span><span class="fu">::</span><span class="va"><a href="iea_cols.html">iea_cols</a></span><span class="op">$</span><span class="va">flow</span>,</span>
<span>  own_use_elect_chp_heat <span class="op">=</span> <span class="fu">IEATools</span><span class="fu">::</span><span class="va"><a href="eiou_flows.html">eiou_flows</a></span><span class="op">$</span><span class="va">own_use_elect_chp_heat_plants</span>,</span>
<span>  pumped_storage <span class="op">=</span> <span class="fu">IEATools</span><span class="fu">::</span><span class="va"><a href="eiou_flows.html">eiou_flows</a></span><span class="op">$</span><span class="va">pumped_storage_plants</span>,</span>
<span>  nuclear_industry <span class="op">=</span> <span class="fu">IEATools</span><span class="fu">::</span><span class="va"><a href="eiou_flows.html">eiou_flows</a></span><span class="op">$</span><span class="va">nuclear_industry</span>,</span>
<span>  e_dot <span class="op">=</span> <span class="fu">IEATools</span><span class="fu">::</span><span class="va"><a href="iea_cols.html">iea_cols</a></span><span class="op">$</span><span class="va">e_dot</span>,</span>
<span>  negzeropos <span class="op">=</span> <span class="st">".negzeropos"</span>,</span>
<span>  main_act_producer_elect <span class="op">=</span></span>
<span><span class="fu">IEATools</span><span class="fu">::</span><span class="va"><a href="eiou_flows.html">eiou_flows</a></span><span class="op">$</span><span class="va">main_activity_producer_electricity_plants</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg--tidy-iea-df">.tidy_iea_df<a class="anchor" aria-label="anchor" href="#arg--tidy-iea-df"></a></dt>
<dd><p>An IEA data frame whose columns have been renamed by <code><a href="rename_iea_df_cols.html">rename_iea_df_cols()</a></code>.</p></dd>


<dt id="arg-split-own-use-elect-chp-heat-using-shares-of">split_own_use_elect_chp_heat_using_shares_of<a class="anchor" aria-label="anchor" href="#arg-split-own-use-elect-chp-heat-using-shares-of"></a></dt>
<dd><p>Indicates whether the input or outputs to
Main activity producer plants should be use for
splitting the Own use in electricity, chp and heat plants
EIOU flow. Default is "input".</p></dd>


<dt id="arg-route-non-specified-eiou">route_non_specified_eiou<a class="anchor" aria-label="anchor" href="#arg-route-non-specified-eiou"></a></dt>
<dd><p>Boolean stating whether non-specified EIOU flows should be routed to existing industries.
Default is TRUE.</p></dd>


<dt id="arg-route-non-specified-tp">route_non_specified_tp<a class="anchor" aria-label="anchor" href="#arg-route-non-specified-tp"></a></dt>
<dd><p>Boolean stating whether non-specified transformation processes flows should be routed to existing industries.
Default is TRUE.</p></dd>


<dt id="arg-specify-renewable-plants">specify_renewable_plants<a class="anchor" aria-label="anchor" href="#arg-specify-renewable-plants"></a></dt>
<dd><p>Boolean stating whether renewable energy industries should be specified or not.
Default is FALSE.</p></dd>


<dt id="arg-specify-electricity-grid">specify_electricity_grid<a class="anchor" aria-label="anchor" href="#arg-specify-electricity-grid"></a></dt>
<dd><p>Boolean stating whether an electricity grid industry should be specified or not.
Default is FALSE.</p></dd>


<dt id="arg-specify-distribution-industries">specify_distribution_industries<a class="anchor" aria-label="anchor" href="#arg-specify-distribution-industries"></a></dt>
<dd><p>Boolean stating whether distribution industries should be specified or not.
Default is FALSE.</p></dd>


<dt id="arg-ascribe-eiou-to-renewable-plants">ascribe_eiou_to_renewable_plants<a class="anchor" aria-label="anchor" href="#arg-ascribe-eiou-to-renewable-plants"></a></dt>
<dd><p>A boolean defining whether a fraction of the EIOU of electricity, CHP and heat plants
should be ascribed to the new renewable industries. Default is FALSE.</p></dd>


<dt id="arg-ascribe-eiou-to-nuclear">ascribe_eiou_to_nuclear<a class="anchor" aria-label="anchor" href="#arg-ascribe-eiou-to-nuclear"></a></dt>
<dd><p>A boolean defining whether a fraction of the EIOU of electricity, CHP and heat plants
should be ascribed to the new nuclear industry. Default is FALSE.</p></dd>


<dt id="arg-flow-aggregation-point">flow_aggregation_point<a class="anchor" aria-label="anchor" href="#arg-flow-aggregation-point"></a></dt>
<dd><p>The name of the flow aggregation point column in <code>.tidy_iea_df</code>. Default is "Flow.aggregation.point".</p></dd>


<dt id="arg-eiou">eiou<a class="anchor" aria-label="anchor" href="#arg-eiou"></a></dt>
<dd><p>A string identifying energy industry own use in the flow aggregation point column. Default is "Energy industry own use".</p></dd>


<dt id="arg-transformation-processes">transformation_processes<a class="anchor" aria-label="anchor" href="#arg-transformation-processes"></a></dt>
<dd><p>A string identifying transformation processes in the flow aggregation point column. Default is "Transformation processes".</p></dd>


<dt id="arg-flow">flow<a class="anchor" aria-label="anchor" href="#arg-flow"></a></dt>
<dd><p>The name of the flow column in <code>.tidy_iea_df</code>. Default is "Flow".</p></dd>


<dt id="arg-own-use-elect-chp-heat">own_use_elect_chp_heat<a class="anchor" aria-label="anchor" href="#arg-own-use-elect-chp-heat"></a></dt>
<dd><p>A string identifying own use in electricity, CHP and heat plants in the flow column. Default is "Own use in electricity, CHP and heat plants".</p></dd>


<dt id="arg-pumped-storage">pumped_storage<a class="anchor" aria-label="anchor" href="#arg-pumped-storage"></a></dt>
<dd><p>A string identifying pumped storage plants in the flow column. Default is "Pumped storage plants".</p></dd>


<dt id="arg-nuclear-industry">nuclear_industry<a class="anchor" aria-label="anchor" href="#arg-nuclear-industry"></a></dt>
<dd><p>A string identifying nuclear plants in the flow column. Default is "Nuclear industry".</p></dd>


<dt id="arg-e-dot">e_dot<a class="anchor" aria-label="anchor" href="#arg-e-dot"></a></dt>
<dd><p>The name of the energy flow column in <code>.tidy_iea_df</code>. Default is "Edot".</p></dd>


<dt id="arg-negzeropos">negzeropos<a class="anchor" aria-label="anchor" href="#arg-negzeropos"></a></dt>
<dd><p>The name of a temporary column created in <code>.tidy_iea_df</code>. Default is ".negzeropos".</p></dd>


<dt id="arg-main-act-producer-elect">main_act_producer_elect<a class="anchor" aria-label="anchor" href="#arg-main-act-producer-elect"></a></dt>
<dd><p>A string identifying main activity producer electricity plants. Default is "Main activity producer electricity plants".</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A modified version of <code>.tidy_iea_df</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The following changes are made to the <code>.tidy_iea_df</code> data frame:</p><ol><li><p>EIOU classified as <code>own_use_elect_chp_heat</code> is sent to <code>main_act_producer_elect</code>.</p></li>
<li><p>EIOU classified as <code>pumped_storage</code> is sent to <code>main_act_producer_elect</code>.</p></li>
<li><p>EIOU classified as <code>nuclear_industry</code> is sent to <code>main_act_producer_elect</code>.</p></li>
<li><p>EIOU classified as <code>non_spec_energy</code> is sent to <code>nonspecenergy_reclassify</code>.</p></li>
</ol><p>After the changes are made, reassigned EIOU may double-up pre-existing EIOU.
For example, a country may already have "Electricity" EIOU flowing into "Main activity producer electricity plants".
It may also have EIOU flowing into "Nuclear industry".
When we switch the EIOU flow into "Nuclear industry" into "Main activity producer electricity plants",
we now have two rows of electricity EIOU into "Main activity producer electricity plants".
To avoid double rows, all like rows are summed before returning.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="load_tidy_iea_df.html">load_tidy_iea_df</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span> </span></span>
<span class="r-in"><span>  <span class="fu">specify_tp_eiou</span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span> </span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">FlowAggregationPoint</span> <span class="op">==</span> <span class="st">"Energy industry own use"</span> <span class="op">&amp;</span> </span></span>
<span class="r-in"><span>           <span class="va">Flow</span> <span class="op">==</span> <span class="st">"Main activity producer electricity plants"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 4 × 11</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Country Method EnergyType LastStage  Year LedgerSide FlowAggregationPoint   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> GHA     PCM    E          Final      <span style="text-decoration: underline;">1</span>971 Supply     Energy industry own use</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> GHA     PCM    E          Final      <span style="text-decoration: underline;">2</span>000 Supply     Energy industry own use</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span> ZAF     PCM    E          Final      <span style="text-decoration: underline;">1</span>971 Supply     Energy industry own use</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span> ZAF     PCM    E          Final      <span style="text-decoration: underline;">2</span>000 Supply     Energy industry own use</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 4 more variables: Flow &lt;chr&gt;, Product &lt;chr&gt;, Unit &lt;chr&gt;, Edot &lt;dbl&gt;</span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Matthew Kuperus Heun, Emmanuel Aramendia, Zeke Marshall.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.2.</p>
</div>

    </footer></div>





  </body></html>


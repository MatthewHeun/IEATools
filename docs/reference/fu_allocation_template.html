<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Create a template for analysis of final-to-useful transformation processes — fu_allocation_template • IEATools</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Create a template for analysis of final-to-useful transformation processes — fu_allocation_template" />
<meta property="og:description" content="This function creates a blank template for final-to-useful energy transformation process analysis.
The template is a data frame derived from IEA extended energy balance data (.tidy_iea_df),
which gives both energy industry own use and final demand for final energy carriers.
From the IEA's final energy information, templates are created for conversion to
useful energy carriers.
Final energy consumed by each final demand sector or transformation process machine
is allocated to final-to-useful machines and converted to useful energy at some efficiency.
The allocation fractions are to be supplied by the analyst by filling blanks in
the template." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">IEATools</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.32</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/IEATools.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/final_to_useful.html">Final to Useful Analysis</a>
    </li>
    <li>
      <a href="../articles/fix_iea_data.html">Fixes for IEA Data</a>
    </li>
    <li>
      <a href="../articles/prep_psut.html">Prepare for PSUT analysis</a>
    </li>
    <li>
      <a href="../articles/specify.html">Specify EIOU Industries and Flows</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Create a template for analysis of final-to-useful transformation processes</h1>
    
    <div class="hidden name"><code>fu_allocation_template.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function creates a blank template for final-to-useful energy transformation process analysis.
The template is a data frame derived from IEA extended energy balance data (<code>.tidy_iea_df</code>),
which gives both energy industry own use and final demand for final energy carriers.
From the IEA's final energy information, templates are created for conversion to
useful energy carriers.
Final energy consumed by each final demand sector or transformation process machine
is allocated to final-to-useful machines and converted to useful energy at some efficiency.
The allocation fractions are to be supplied by the analyst by filling blanks in
the template.</p>
    </div>

    <pre class="usage"><span class='fu'>fu_allocation_template</span>(
  <span class='no'>.tidy_iea_df</span>,
  <span class='kw'>energy_type</span> <span class='kw'>=</span> <span class='st'>"Energy.type"</span>,
  <span class='kw'>energy</span> <span class='kw'>=</span> <span class='st'>"E"</span>,
  <span class='kw'>last_stage</span> <span class='kw'>=</span> <span class='st'>"Last.stage"</span>,
  <span class='kw'>final</span> <span class='kw'>=</span> <span class='st'>"Final"</span>,
  <span class='kw'>year</span> <span class='kw'>=</span> <span class='st'>"Year"</span>,
  <span class='kw'>ledger_side</span> <span class='kw'>=</span> <span class='st'>"Ledger.side"</span>,
  <span class='kw'>consumption</span> <span class='kw'>=</span> <span class='st'>"Consumption"</span>,
  <span class='kw'>flow_aggregation_point</span> <span class='kw'>=</span> <span class='st'>"Flow.aggregation.point"</span>,
  <span class='kw'>eiou</span> <span class='kw'>=</span> <span class='st'>"Energy industry own use"</span>,
  <span class='kw'>non_energy_use</span> <span class='kw'>=</span> <span class='st'>"Non-energy use"</span>,
  <span class='kw'>tfc</span> <span class='kw'>=</span> <span class='st'>"Total final consumption"</span>,
  <span class='kw'>tpes</span> <span class='kw'>=</span> <span class='st'>"Total primary energy supply"</span>,
  <span class='kw'>flow</span> <span class='kw'>=</span> <span class='st'>"Flow"</span>,
  <span class='kw'>product</span> <span class='kw'>=</span> <span class='st'>"Product"</span>,
  <span class='kw'>destination</span> <span class='kw'>=</span> <span class='st'>"Destination"</span>,
  <span class='kw'>quantity</span> <span class='kw'>=</span> <span class='st'>"Quantity"</span>,
  <span class='kw'>e_dot</span> <span class='kw'>=</span> <span class='st'>"E.dot"</span>,
  <span class='kw'>e_dot_total</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste0</a></span>(<span class='no'>e_dot</span>, <span class='st'>".total"</span>),
  <span class='kw'>perc_unit_string</span> <span class='kw'>=</span> <span class='st'>"[%]"</span>,
  <span class='kw'>e_dot_perc</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste</a></span>(<span class='no'>e_dot</span>, <span class='no'>perc_unit_string</span>),
  <span class='kw'>maximum_values</span> <span class='kw'>=</span> <span class='st'>"Maximum.values"</span>,
  <span class='kw'>year_for_maximum_values</span> <span class='kw'>=</span> <span class='fl'>0</span>,
  <span class='kw'>ef_product</span> <span class='kw'>=</span> <span class='st'>"Ef.product"</span>,
  <span class='kw'>allocation_var</span> <span class='kw'>=</span> <span class='st'>"C_"</span>,
  <span class='kw'>n_allocation_rows</span> <span class='kw'>=</span> <span class='fl'>4</span>,
  <span class='kw'>machine</span> <span class='kw'>=</span> <span class='st'>"Machine"</span>,
  <span class='kw'>eu_product</span> <span class='kw'>=</span> <span class='st'>"Eu.product"</span>,
  <span class='kw'>arrange</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>.value</span> <span class='kw'>=</span> <span class='st'>".value"</span>
)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>.tidy_iea_df</th>
      <td><p>a tidy data frame containing IEA extended energy balance data</p></td>
    </tr>
    <tr>
      <th>energy_type</th>
      <td><p>the name of the energy type column. Default is "<code>Energy.type</code>".</p></td>
    </tr>
    <tr>
      <th>energy</th>
      <td><p>the string identifier for energy (as opposed to exergy) in the <code>energy_type</code> column. Default is "<code>E</code>".</p></td>
    </tr>
    <tr>
      <th>last_stage</th>
      <td><p>the name of the last stage column. Default is "<code>Last.stage</code>".</p></td>
    </tr>
    <tr>
      <th>final</th>
      <td><p>the string identifier for final energy (as <code>Last.stage</code>). Default is "<code>Final</code>".</p></td>
    </tr>
    <tr>
      <th>year</th>
      <td><p>the name of the year column. Default is "<code>Year</code>".</p></td>
    </tr>
    <tr>
      <th>ledger_side</th>
      <td><p>the name of the ledger side column. Default is "<code>Ldeger.side</code>".</p></td>
    </tr>
    <tr>
      <th>consumption</th>
      <td><p>the string identifier for the consumption side of the ledger. Default is "<code>Consumption</code>".</p></td>
    </tr>
    <tr>
      <th>flow_aggregation_point</th>
      <td><p>the name of the flow aggregation point column. Default is "<code>Flow.aggregation.point</code>".</p></td>
    </tr>
    <tr>
      <th>eiou</th>
      <td><p>the string identifier for energy industry own use in <code>flow_aggregation_point</code>. Default is "<code>Energy industry own use</code>".</p></td>
    </tr>
    <tr>
      <th>non_energy_use</th>
      <td><p>string identifier for non-energy use in <code>flow_aggregation_point</code>. Default is "<code>Non-energy use</code>".</p></td>
    </tr>
    <tr>
      <th>tfc</th>
      <td><p>the string identifier for total final consumption. Default is "<code>Total final consumption</code>".</p></td>
    </tr>
    <tr>
      <th>tpes</th>
      <td><p>the string identifier for total primary energy supply. Default is "<code>Total primary energy supply</code>".</p></td>
    </tr>
    <tr>
      <th>flow</th>
      <td><p>the name of the flow column. Default is "<code>Flow</code>".</p></td>
    </tr>
    <tr>
      <th>product</th>
      <td><p>the name of the product column. Default is "<code>Product</code>".</p></td>
    </tr>
    <tr>
      <th>destination</th>
      <td><p>the name for the destination column. Default is "<code>Destination</code>".</p></td>
    </tr>
    <tr>
      <th>quantity</th>
      <td><p>the name of the quantity column. Default is "<code>Quantity</code>".</p></td>
    </tr>
    <tr>
      <th>e_dot</th>
      <td><p>the name of the energy flow rate column. Default is "<code>E.dot</code>".</p></td>
    </tr>
    <tr>
      <th>e_dot_total</th>
      <td><p>the string identifier for total energy. Default is "<code>E.dot.total</code>".</p></td>
    </tr>
    <tr>
      <th>perc_unit_string</th>
      <td><p>the string used to indicate percentages. Default is "<code>[%]</code>".</p></td>
    </tr>
    <tr>
      <th>e_dot_perc</th>
      <td><p>the string identifier for energy percentage. Default is "<code>E.dot.perc</code>".</p></td>
    </tr>
    <tr>
      <th>maximum_values</th>
      <td><p>the name for the maximum energy values column. Default is "<code>Maximum values</code>".</p></td>
    </tr>
    <tr>
      <th>year_for_maximum_values</th>
      <td><p>an integer for the first year (in which maximum values will be stored before renaming the column to <code>maximum_values</code>).
Default is <code>0</code>.</p></td>
    </tr>
    <tr>
      <th>ef_product</th>
      <td><p>the name of the final energy carrier column. Default is "<code>Ef product</code>".</p></td>
    </tr>
    <tr>
      <th>allocation_var</th>
      <td><p>the string identifier for the allocation percentage column. Default is "<code>C_</code>".</p></td>
    </tr>
    <tr>
      <th>n_allocation_rows</th>
      <td><p>an integer stating how many allocation rows are desired. Default is <code>3</code>.</p></td>
    </tr>
    <tr>
      <th>machine</th>
      <td><p>the name of the column of final-to-useful transformation process machines. Default is "<code>Machine</code>".</p></td>
    </tr>
    <tr>
      <th>eu_product</th>
      <td><p>the name of the useful energy carrier column. Default is "<code>Eu product</code>".</p></td>
    </tr>
    <tr>
      <th>arrange</th>
      <td><p>a boolean telling whether to arranged the rows and columns
(using <code><a href='arrange_iea_fu_allocation_template.html'>arrange_iea_fu_allocation_template()</a></code>) before returning.
Default is <code>TRUE</code>.</p></td>
    </tr>
    <tr>
      <th>.value</th>
      <td><p>the name of a temporary value column added to <code>.tidy_iea_df</code>.
A <code>.value</code> column must not be present in <code>.tidy_iea_df</code>. Default is "<code>.value</code>".</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>a data frame containing the EIOU template</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Non-energy use is removed from <code>.tidy_iea_df</code> before creating the template.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'><a href='load_tidy_iea_df.html'>load_tidy_iea_df</a></span>() <span class='kw'>%&gt;%</span>
  <span class='fu'><a href='specify_all.html'>specify_all</a></span>() <span class='kw'>%&gt;%</span>
  <span class='fu'>fu_allocation_template</span>()</div><div class='output co'>#&gt; <span style='color: #949494;'># A tibble: 900 x 15</span><span>
#&gt;    Country Method Energy.type Last.stage Ledger.side Flow.aggregatio… Unit 
#&gt;    </span><span style='color: #949494;font-style: italic;'>&lt;chr&gt;</span><span>   </span><span style='color: #949494;font-style: italic;'>&lt;chr&gt;</span><span>  </span><span style='color: #949494;font-style: italic;'>&lt;chr&gt;</span><span>       </span><span style='color: #949494;font-style: italic;'>&lt;chr&gt;</span><span>      </span><span style='color: #949494;font-style: italic;'>&lt;chr&gt;</span><span>       </span><span style='color: #949494;font-style: italic;'>&lt;chr&gt;</span><span>            </span><span style='color: #949494;font-style: italic;'>&lt;chr&gt;</span><span>
#&gt; </span><span style='color: #BCBCBC;'> 1</span><span> GHA     PCM    E           Final      Supply      Energy industry… ktoe 
#&gt; </span><span style='color: #BCBCBC;'> 2</span><span> GHA     PCM    E           Final      Supply      Energy industry… ktoe 
#&gt; </span><span style='color: #BCBCBC;'> 3</span><span> GHA     PCM    E           Final      Supply      Energy industry… ktoe 
#&gt; </span><span style='color: #BCBCBC;'> 4</span><span> GHA     PCM    E           Final      Supply      Energy industry… ktoe 
#&gt; </span><span style='color: #BCBCBC;'> 5</span><span> GHA     PCM    E           Final      Supply      Energy industry… ktoe 
#&gt; </span><span style='color: #BCBCBC;'> 6</span><span> GHA     PCM    E           Final      Supply      Energy industry… ktoe 
#&gt; </span><span style='color: #BCBCBC;'> 7</span><span> GHA     PCM    E           Final      Supply      Energy industry… ktoe 
#&gt; </span><span style='color: #BCBCBC;'> 8</span><span> GHA     PCM    E           Final      Supply      Energy industry… ktoe 
#&gt; </span><span style='color: #BCBCBC;'> 9</span><span> GHA     PCM    E           Final      Supply      Energy industry… ktoe 
#&gt; </span><span style='color: #BCBCBC;'>10</span><span> GHA     PCM    E           Final      Supply      Energy industry… ktoe 
#&gt; </span><span style='color: #949494;'># … with 890 more rows, and 8 more variables: Ef.product </span><span style='color: #949494;font-style: italic;'>&lt;chr&gt;</span><span style='color: #949494;'>, Machine </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span style='color: #949494;'>,</span><span>
#&gt; </span><span style='color: #949494;'>#   Eu.product </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span style='color: #949494;'>, Destination </span><span style='color: #949494;font-style: italic;'>&lt;chr&gt;</span><span style='color: #949494;'>, Quantity </span><span style='color: #949494;font-style: italic;'>&lt;chr&gt;</span><span style='color: #949494;'>, Maximum.values </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span style='color: #949494;'>,</span><span>
#&gt; </span><span style='color: #949494;'>#   `1971` </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span style='color: #949494;'>, `2000` </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span></div></span></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Matthew Heun.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>



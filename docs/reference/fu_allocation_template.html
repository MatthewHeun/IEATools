<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="This function creates a blank template for final-to-useful energy transformation process analysis.
The template is a data frame derived from IEA extended energy balance data (.tidy_iea_df),
which gives both energy industry own use and final demand for final energy carriers.
From the IEA's final energy information, templates are created for conversion to
useful energy carriers.
Final energy consumed by each final demand sector or transformation process machine
is allocated to final-to-useful machines and converted to useful energy at some efficiency.
The allocation fractions are to be supplied by the analyst by filling blanks in
the template."><title>Create a template for analysis of final-to-useful transformation processes — fu_allocation_template • IEATools</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Create a template for analysis of final-to-useful transformation processes — fu_allocation_template"><meta property="og:description" content="This function creates a blank template for final-to-useful energy transformation process analysis.
The template is a data frame derived from IEA extended energy balance data (.tidy_iea_df),
which gives both energy industry own use and final demand for final energy carriers.
From the IEA's final energy information, templates are created for conversion to
useful energy carriers.
Final energy consumed by each final demand sector or transformation process machine
is allocated to final-to-useful machines and converted to useful energy at some efficiency.
The allocation fractions are to be supplied by the analyst by filling blanks in
the template."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">IEATools</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.63</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/IEATools.html">Get started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/final_to_useful.html">Final to Useful Analysis</a>
    <a class="dropdown-item" href="../articles/fix_iea_data.html">Fixes for IEA Data</a>
    <a class="dropdown-item" href="../articles/prep_psut.html">Prepare for PSUT analysis</a>
    <a class="dropdown-item" href="../articles/psut_names.html">PSUT Names</a>
    <a class="dropdown-item" href="../articles/specify.html">Specify EIOU Industries and Flows</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"></ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Create a template for analysis of final-to-useful transformation processes</h1>
      
      <div class="d-none name"><code>fu_allocation_template.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function creates a blank template for final-to-useful energy transformation process analysis.
The template is a data frame derived from IEA extended energy balance data (<code>.tidy_iea_df</code>),
which gives both energy industry own use and final demand for final energy carriers.
From the IEA's final energy information, templates are created for conversion to
useful energy carriers.
Final energy consumed by each final demand sector or transformation process machine
is allocated to final-to-useful machines and converted to useful energy at some efficiency.
The allocation fractions are to be supplied by the analyst by filling blanks in
the template.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">fu_allocation_template</span><span class="op">(</span>
  <span class="va">.tidy_iea_df</span>,
  energy_type <span class="op">=</span> <span class="st">"Energy.type"</span>,
  energy <span class="op">=</span> <span class="st">"E"</span>,
  last_stage <span class="op">=</span> <span class="st">"Last.stage"</span>,
  final <span class="op">=</span> <span class="st">"Final"</span>,
  year <span class="op">=</span> <span class="st">"Year"</span>,
  ledger_side <span class="op">=</span> <span class="st">"Ledger.side"</span>,
  consumption <span class="op">=</span> <span class="st">"Consumption"</span>,
  flow_aggregation_point <span class="op">=</span> <span class="st">"Flow.aggregation.point"</span>,
  eiou <span class="op">=</span> <span class="st">"Energy industry own use"</span>,
  non_energy_use <span class="op">=</span> <span class="st">"Non-energy use"</span>,
  tfc <span class="op">=</span> <span class="st">"Total final consumption"</span>,
  tpes <span class="op">=</span> <span class="st">"Total primary energy supply"</span>,
  flow <span class="op">=</span> <span class="st">"Flow"</span>,
  product <span class="op">=</span> <span class="st">"Product"</span>,
  destination <span class="op">=</span> <span class="st">"Destination"</span>,
  quantity <span class="op">=</span> <span class="st">"Quantity"</span>,
  e_dot <span class="op">=</span> <span class="st">"E.dot"</span>,
  e_dot_total <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">e_dot</span>, <span class="st">".total"</span><span class="op">)</span>,
  perc_unit_string <span class="op">=</span> <span class="st">"[%]"</span>,
  e_dot_perc <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">e_dot</span>, <span class="va">perc_unit_string</span><span class="op">)</span>,
  maximum_values <span class="op">=</span> <span class="st">"Maximum.values"</span>,
  year_for_maximum_values <span class="op">=</span> <span class="fl">0</span>,
  ef_product <span class="op">=</span> <span class="st">"Ef.product"</span>,
  allocation_var <span class="op">=</span> <span class="st">"C_"</span>,
  n_allocation_rows <span class="op">=</span> <span class="fl">4</span>,
  machine <span class="op">=</span> <span class="st">"Machine"</span>,
  eu_product <span class="op">=</span> <span class="st">"Eu.product"</span>,
  arrange <span class="op">=</span> <span class="cn">TRUE</span>,
  .value <span class="op">=</span> <span class="st">".value"</span>
<span class="op">)</span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>.tidy_iea_df</dt>
<dd><p>a tidy data frame containing IEA extended energy balance data</p></dd>
<dt>energy_type</dt>
<dd><p>the name of the energy type column. Default is "Energy.type".</p></dd>
<dt>energy</dt>
<dd><p>the string identifier for energy (as opposed to exergy) in the <code>energy_type</code> column. Default is "<code>E</code>".</p></dd>
<dt>last_stage</dt>
<dd><p>the name of the last stage column. Default is "Last.stage".</p></dd>
<dt>final</dt>
<dd><p>the string identifier for final energy (as <code>Last.stage</code>). Default is "Final".</p></dd>
<dt>year</dt>
<dd><p>the name of the year column. Default is "Year".</p></dd>
<dt>ledger_side</dt>
<dd><p>the name of the ledger side column. Default is "Ledger.side".</p></dd>
<dt>consumption</dt>
<dd><p>the string identifier for the consumption side of the ledger. Default is "Consumption".</p></dd>
<dt>flow_aggregation_point</dt>
<dd><p>the name of the flow aggregation point column. Default is "Flow.aggregation.point".</p></dd>
<dt>eiou</dt>
<dd><p>the string identifier for energy industry own use in <code>flow_aggregation_point</code>. Default is "Energy industry own use".</p></dd>
<dt>non_energy_use</dt>
<dd><p>string identifier for non-energy use in <code>flow_aggregation_point</code>. Default is "Non-energy use".</p></dd>
<dt>tfc</dt>
<dd><p>the string identifier for total final consumption. Default is "Total final consumption".</p></dd>
<dt>tpes</dt>
<dd><p>the string identifier for total primary energy supply. Default is "Total primary energy supply".</p></dd>
<dt>flow</dt>
<dd><p>the name of the flow column. Default is "Flow".</p></dd>
<dt>product</dt>
<dd><p>the name of the product column. Default is "Product".</p></dd>
<dt>destination</dt>
<dd><p>the name for the destination column. Default is "Destination".</p></dd>
<dt>quantity</dt>
<dd><p>the name of the quantity column. Default is "Quantity".</p></dd>
<dt>e_dot</dt>
<dd><p>the name of the energy flow rate column. Default is "E.dot".</p></dd>
<dt>e_dot_total</dt>
<dd><p>the string identifier for total energy. Default is "E.dot.total".</p></dd>
<dt>perc_unit_string</dt>
<dd><p>the string used to indicate percentages. Default is "<code>[%]</code>".</p></dd>
<dt>e_dot_perc</dt>
<dd><p>the string identifier for energy percentage. Default is "E.dot.perc".</p></dd>
<dt>maximum_values</dt>
<dd><p>the name for the maximum energy values column. Default is "Maximum values".</p></dd>
<dt>year_for_maximum_values</dt>
<dd><p>an integer for the first year (in which maximum values will be stored before renaming the column to <code>maximum_values</code>).
Default is <code>0</code>.</p></dd>
<dt>ef_product</dt>
<dd><p>the name of the final energy carrier column. Default is "Ef product".</p></dd>
<dt>allocation_var</dt>
<dd><p>the string identifier for the allocation percentage column. Default is "C_".</p></dd>
<dt>n_allocation_rows</dt>
<dd><p>an integer stating how many allocation rows are desired. Default is <code>3</code>.</p></dd>
<dt>machine</dt>
<dd><p>the name of the column of final-to-useful transformation process machines. Default is "Machine".</p></dd>
<dt>eu_product</dt>
<dd><p>the name of the useful energy carrier column. Default is "Eu product".</p></dd>
<dt>arrange</dt>
<dd><p>a boolean telling whether to arranged the rows and columns
(using <code><a href="arrange_iea_fu_allocation_template.html">arrange_iea_fu_allocation_template()</a></code>) before returning.
Default is <code>TRUE</code>.</p></dd>
<dt>.value</dt>
<dd><p>the name of a temporary value column added to <code>.tidy_iea_df</code>.
A <code>.value</code> column must not be present in <code>.tidy_iea_df</code>. Default is ".value".</p></dd>
</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>a data frame containing the EIOU template</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Non-energy use is removed from <code>.tidy_iea_df</code> before creating the template.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="fu"><a href="load_tidy_iea_df.html">load_tidy_iea_df</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span> </span>
<span class="r-in">  <span class="fu"><a href="specify_all.html">specify_all</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span> </span>
<span class="r-in">  <span class="fu">fu_allocation_template</span><span class="op">(</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 906 × 15</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Country Method Energy.type Last.stage Ledger.side Flow.aggregation.poi… Unit </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> GHA     PCM    E           Final      Supply      Energy industry own … ktoe </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> GHA     PCM    E           Final      Supply      Energy industry own … ktoe </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> GHA     PCM    E           Final      Supply      Energy industry own … ktoe </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> GHA     PCM    E           Final      Supply      Energy industry own … ktoe </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> GHA     PCM    E           Final      Supply      Energy industry own … ktoe </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> GHA     PCM    E           Final      Supply      Energy industry own … ktoe </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> GHA     PCM    E           Final      Supply      Energy industry own … ktoe </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> GHA     PCM    E           Final      Supply      Energy industry own … ktoe </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> GHA     PCM    E           Final      Supply      Energy industry own … ktoe </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> GHA     PCM    E           Final      Supply      Energy industry own … ktoe </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># … with 896 more rows, and 8 more variables: Ef.product &lt;chr&gt;, Machine &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   Eu.product &lt;dbl&gt;, Destination &lt;chr&gt;, Quantity &lt;chr&gt;, Maximum.values &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   `1971` &lt;dbl&gt;, `2000` &lt;dbl&gt;</span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Matthew Heun, Emmanuel Aramendia, Zeke Marshall.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

    </footer></div>

  

  

  </body></html>


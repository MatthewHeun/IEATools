<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="This function creates vectors from a filled final-to-useful efficiency table
created by write_fu_allocation_template().
The two vectors are:
eta_fu: a vector of final-to-useful energy efficiencies, and
phi_u: a vector of useful exergy-to-useful energy ratios.

"><title>Create eta_fu and phi_u vectors — form_eta_fu_phi_u_vecs • IEATools</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Create eta_fu and phi_u vectors — form_eta_fu_phi_u_vecs"><meta property="og:description" content="This function creates vectors from a filled final-to-useful efficiency table
created by write_fu_allocation_template().
The two vectors are:
eta_fu: a vector of final-to-useful energy efficiencies, and
phi_u: a vector of useful exergy-to-useful energy ratios.

"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">IEATools</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.71</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/IEATools.html">Get started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/final_to_useful.html">Final to Useful Analysis</a>
    <a class="dropdown-item" href="../articles/fix_iea_data.html">Fixes for IEA Data</a>
    <a class="dropdown-item" href="../articles/prep_psut.html">Prepare for PSUT analysis</a>
    <a class="dropdown-item" href="../articles/psut_names.html">PSUT Names</a>
    <a class="dropdown-item" href="../articles/specify.html">Specify EIOU Industries and Flows</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"></ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Create <code>eta_fu</code> and <code>phi_u</code> vectors</h1>
      
      <div class="d-none name"><code>form_eta_fu_phi_u_vecs.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function creates vectors from a filled final-to-useful efficiency table
created by <code><a href="write_fu_allocation_template.html">write_fu_allocation_template()</a></code>.
The two vectors are:</p><ul><li><p><code>eta_fu</code>: a vector of final-to-useful energy efficiencies, and</p></li>
<li><p><code>phi_u</code>: a vector of useful exergy-to-useful energy ratios.</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">form_eta_fu_phi_u_vecs</span><span class="op">(</span></span>
<span>  <span class="va">.eta_fu_table</span>,</span>
<span>  matrix_class <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"matrix"</span>, <span class="st">"Matrix"</span><span class="op">)</span>,</span>
<span>  unit <span class="op">=</span> <span class="fu">IEATools</span><span class="fu">::</span><span class="va"><a href="iea_cols.html">iea_cols</a></span><span class="op">$</span><span class="va">unit</span>,</span>
<span>  year <span class="op">=</span> <span class="fu">IEATools</span><span class="fu">::</span><span class="va"><a href="iea_cols.html">iea_cols</a></span><span class="op">$</span><span class="va">year</span>,</span>
<span>  quantity <span class="op">=</span> <span class="fu">IEATools</span><span class="fu">::</span><span class="va"><a href="template_cols.html">template_cols</a></span><span class="op">$</span><span class="va">quantity</span>,</span>
<span>  machine <span class="op">=</span> <span class="fu">IEATools</span><span class="fu">::</span><span class="va"><a href="template_cols.html">template_cols</a></span><span class="op">$</span><span class="va">machine</span>,</span>
<span>  eu_product <span class="op">=</span> <span class="fu">IEATools</span><span class="fu">::</span><span class="va"><a href="template_cols.html">template_cols</a></span><span class="op">$</span><span class="va">eu_product</span>,</span>
<span>  e_dot_machine <span class="op">=</span> <span class="fu">IEATools</span><span class="fu">::</span><span class="va"><a href="template_cols.html">template_cols</a></span><span class="op">$</span><span class="va">e_dot_machine</span>,</span>
<span>  e_dot_machine_perc <span class="op">=</span> <span class="fu">IEATools</span><span class="fu">::</span><span class="va"><a href="template_cols.html">template_cols</a></span><span class="op">$</span><span class="va">e_dot_machine_perc</span>,</span>
<span>  maximum_values <span class="op">=</span> <span class="fu">IEATools</span><span class="fu">::</span><span class="va"><a href="template_cols.html">template_cols</a></span><span class="op">$</span><span class="va">maximum_values</span>,</span>
<span>  eta_fu <span class="op">=</span> <span class="fu">IEATools</span><span class="fu">::</span><span class="va"><a href="template_cols.html">template_cols</a></span><span class="op">$</span><span class="va">eta_fu</span>,</span>
<span>  phi_u <span class="op">=</span> <span class="fu">IEATools</span><span class="fu">::</span><span class="va"><a href="template_cols.html">template_cols</a></span><span class="op">$</span><span class="va">phi_u</span>,</span>
<span>  phi <span class="op">=</span> <span class="fu">IEATools</span><span class="fu">::</span><span class="va"><a href="template_cols.html">template_cols</a></span><span class="op">$</span><span class="va">phi</span>,</span>
<span>  matnames <span class="op">=</span> <span class="fu">IEATools</span><span class="fu">::</span><span class="va"><a href="mat_meta_cols.html">mat_meta_cols</a></span><span class="op">$</span><span class="va">matnames</span>,</span>
<span>  matvals <span class="op">=</span> <span class="fu">IEATools</span><span class="fu">::</span><span class="va"><a href="mat_meta_cols.html">mat_meta_cols</a></span><span class="op">$</span><span class="va">matvals</span>,</span>
<span>  rownames <span class="op">=</span> <span class="fu">IEATools</span><span class="fu">::</span><span class="va"><a href="mat_meta_cols.html">mat_meta_cols</a></span><span class="op">$</span><span class="va">rownames</span>,</span>
<span>  colnames <span class="op">=</span> <span class="fu">IEATools</span><span class="fu">::</span><span class="va"><a href="mat_meta_cols.html">mat_meta_cols</a></span><span class="op">$</span><span class="va">colnames</span>,</span>
<span>  rowtypes <span class="op">=</span> <span class="fu">IEATools</span><span class="fu">::</span><span class="va"><a href="mat_meta_cols.html">mat_meta_cols</a></span><span class="op">$</span><span class="va">rowtypes</span>,</span>
<span>  coltypes <span class="op">=</span> <span class="fu">IEATools</span><span class="fu">::</span><span class="va"><a href="mat_meta_cols.html">mat_meta_cols</a></span><span class="op">$</span><span class="va">coltypes</span>,</span>
<span>  product <span class="op">=</span> <span class="fu">IEATools</span><span class="fu">::</span><span class="va"><a href="row_col_types.html">row_col_types</a></span><span class="op">$</span><span class="va">product</span>,</span>
<span>  industry <span class="op">=</span> <span class="fu">IEATools</span><span class="fu">::</span><span class="va"><a href="row_col_types.html">row_col_types</a></span><span class="op">$</span><span class="va">industry</span>,</span>
<span>  arrow_note <span class="op">=</span> <span class="fu">RCLabels</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/RCLabels/man/arrow_notation.html" class="external-link">arrow_notation</a></span>,</span>
<span>  from_note <span class="op">=</span> <span class="fu">RCLabels</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/RCLabels/man/from_notation.html" class="external-link">from_notation</a></span>,</span>
<span>  .id <span class="op">=</span> <span class="st">".id"</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>.eta_fu_table</dt>
<dd><p>a final-to-useful efficiency table read by <code>load_eta_fu_allocation_data()</code>.
A template for this table should have been created by <code>eta_fu_table()</code> and
<code>write_eta_fu_table()</code>.</p></dd>


<dt>matrix_class</dt>
<dd><p>The type of matrix to be created, one of "matrix" or "Matrix".
Default is "matrix".</p></dd>


<dt>unit, year</dt>
<dd><p>See <code><a href="iea_cols.html">IEATools::iea_cols</a></code>.</p></dd>


<dt>quantity, machine, eu_product, e_dot_machine, e_dot_machine_perc, maximum_values, eta_fu, phi_u, phi</dt>
<dd><p>See <code><a href="template_cols.html">IEATools::template_cols</a></code>.</p></dd>


<dt>matnames, matvals, rownames, colnames, rowtypes, coltypes</dt>
<dd><p>See <code><a href="mat_meta_cols.html">IEATools::mat_meta_cols</a></code>.</p></dd>


<dt>product, industry</dt>
<dd><p>See <code><a href="row_col_types.html">IEATools::row_col_types</a></code>.</p></dd>


<dt>arrow_note, from_note</dt>
<dd><p>Notation vectors used for creating the eta_fu and phi vectors.
See <code>matsbyname::notation_vec()</code>.
Defaults are <code><a href="https://rdrr.io/pkg/RCLabels/man/arrow_notation.html" class="external-link">RCLabels::arrow_notation</a></code> and ``RCLabels::from_notation`, respectively.</p></dd>


<dt>.id</dt>
<dd><p>The name of an identification column used internally. Default is ".id".</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>a wide-by-matrices data frame with metadata columns (and year)
along with columns for <code>eta_fu</code> and <code>phi_u</code> vectors.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The vectors <code>eta_fu</code> and <code>phi_u</code> have special rownames that indicate
sources and types of useful energy flows.
Row names in the <code>eta_fu</code> vector have the pattern
"industry -&gt; product" to indicate
the energy efficiency of "industry" for making "product"
or the exergy-to-energy ratio of the useful energy form created by a final-to-useful machine.
Row names in the <code>phi_u</code> vector are named by energy product only.</p>
<p>Each energy product should have the same phi, regardless of machine that produced it.
So this function checks whether each combination of metadata
produces the same phi values.
If any different phi values are found,
an error is produced.</p>
<p>Columns in the outgoing data frame are named by the variable in the vector:
<code>eta_fu</code> for final-to-useful efficiencies and
<code>phi_u</code> for useful exergy-to-useful energy ratios.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu"><a href="load_eta_fu_data.html">load_eta_fu_data</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span> </span></span>
<span class="r-in"><span>  <span class="fu">form_eta_fu_phi_u_vecs</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 4 × 7</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Country Method Energy.type Last.stage  Year eta.fu         phi.u        </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> GHA     PCM    E           Final       <span style="text-decoration: underline;">1</span>971 <span style="color: #949494;">&lt;dbl [22 × 1]&gt;</span> <span style="color: #949494;">&lt;dbl [6 × 1]&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> GHA     PCM    E           Final       <span style="text-decoration: underline;">2</span>000 <span style="color: #949494;">&lt;dbl [21 × 1]&gt;</span> <span style="color: #949494;">&lt;dbl [6 × 1]&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span> ZAF     PCM    E           Final       <span style="text-decoration: underline;">1</span>971 <span style="color: #949494;">&lt;dbl [31 × 1]&gt;</span> <span style="color: #949494;">&lt;dbl [7 × 1]&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span> ZAF     PCM    E           Final       <span style="text-decoration: underline;">2</span>000 <span style="color: #949494;">&lt;dbl [43 × 1]&gt;</span> <span style="color: #949494;">&lt;dbl [7 × 1]&gt;</span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Matthew Heun, Emmanuel Aramendia, Zeke Marshall.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>


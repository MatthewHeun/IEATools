<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="It is helpful to sort rows and columns of a final-to-useful allocation template
in reasonable ways to assist analysts.
This function sorts rows (top-to-bottom) by default in the same order as appears in the IEA extended energy balance data.
Other orderings can be specified with the fap_flow_order and ef_product_order arguments.
It sorts columns (left-to-right) in the order of energy flow through the energy conversion chain."><title>Arrange the rows and/or columns of a final-to-useful allocation template — arrange_iea_fu_allocation_template • IEATools</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Arrange the rows and/or columns of a final-to-useful allocation template — arrange_iea_fu_allocation_template"><meta property="og:description" content="It is helpful to sort rows and columns of a final-to-useful allocation template
in reasonable ways to assist analysts.
This function sorts rows (top-to-bottom) by default in the same order as appears in the IEA extended energy balance data.
Other orderings can be specified with the fap_flow_order and ef_product_order arguments.
It sorts columns (left-to-right) in the order of energy flow through the energy conversion chain."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">IEATools</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.69</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/IEATools.html">Get started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/final_to_useful.html">Final to Useful Analysis</a>
    <a class="dropdown-item" href="../articles/fix_iea_data.html">Fixes for IEA Data</a>
    <a class="dropdown-item" href="../articles/prep_psut.html">Prepare for PSUT analysis</a>
    <a class="dropdown-item" href="../articles/psut_names.html">PSUT Names</a>
    <a class="dropdown-item" href="../articles/specify.html">Specify EIOU Industries and Flows</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"></ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Arrange the rows and/or columns of a final-to-useful allocation template</h1>
      
      <div class="d-none name"><code>arrange_iea_fu_allocation_template.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>It is helpful to sort rows and columns of a final-to-useful allocation template
in reasonable ways to assist analysts.
This function sorts rows (top-to-bottom) by default in the same order as appears in the IEA extended energy balance data.
Other orderings can be specified with the <code>fap_flow_order</code> and <code>ef_product_order</code> arguments.
It sorts columns (left-to-right) in the order of energy flow through the energy conversion chain.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">arrange_iea_fu_allocation_template</span><span class="op">(</span></span>
<span>  <span class="va">.fu_allocation_template</span>,</span>
<span>  rowcol <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"both"</span>, <span class="st">"row"</span>, <span class="st">"col"</span><span class="op">)</span>,</span>
<span>  ledger_side <span class="op">=</span> <span class="st">"Ledger.side"</span>,</span>
<span>  flow_aggregation_point <span class="op">=</span> <span class="st">"Flow.aggregation.point"</span>,</span>
<span>  ef_product <span class="op">=</span> <span class="st">"Ef.product"</span>,</span>
<span>  machine <span class="op">=</span> <span class="st">"Machine"</span>,</span>
<span>  eu_product <span class="op">=</span> <span class="st">"Eu.product"</span>,</span>
<span>  destination <span class="op">=</span> <span class="st">"Destination"</span>,</span>
<span>  unit <span class="op">=</span> <span class="st">"Unit"</span>,</span>
<span>  fap_dest_order <span class="op">=</span> <span class="fu">IEATools</span><span class="fu">::</span><span class="va"><a href="fap_flows.html">fap_flows</a></span>,</span>
<span>  ef_product_order <span class="op">=</span> <span class="fu">IEATools</span><span class="fu">::</span><span class="va"><a href="products.html">products</a></span>,</span>
<span>  quantity <span class="op">=</span> <span class="st">"Quantity"</span>,</span>
<span>  maximum_values <span class="op">=</span> <span class="st">"Maximum.values"</span>,</span>
<span>  .temp_sort <span class="op">=</span> <span class="st">".fap_flow"</span>,</span>
<span>  .clean_ef_product <span class="op">=</span> <span class="st">".clean_Ef_product"</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>.fu_allocation_template</dt>
<dd><p>the final-to-useful allocation template created by <code><a href="fu_allocation_template.html">fu_allocation_template()</a></code></p></dd>


<dt>rowcol</dt>
<dd><p>one of "both", "row", or "col" to indicate whether rows, columns, or both should be arranged.
Default is "both".</p></dd>


<dt>ledger_side</dt>
<dd><p>the ledger side column in <code>.fu_allocation_template</code>. Default is "Ledger.side".</p></dd>


<dt>flow_aggregation_point</dt>
<dd><p>the flow aggregation point column in <code>.fu_allocation_template</code>. Default is "Flow.aggregation.point".</p></dd>


<dt>ef_product</dt>
<dd><p>the name of the final energy column in <code>.fu_allocation_template</code>. Default is "Ef.product".</p></dd>


<dt>machine</dt>
<dd><p>the name of the machine column in <code>.fu_allocation_template</code>. Default is "Machine".</p></dd>


<dt>eu_product</dt>
<dd><p>the name of the useful energy product column in <code>.fu_allocation_template</code>. Default is "Eu.product".</p></dd>


<dt>destination</dt>
<dd><p>the name of the destination column in <code>.fu_allocation_template</code>. Default is "Destination".</p></dd>


<dt>unit</dt>
<dd><p>the name of the unit in <code>.fu_allocation_template</code>. Default is "Unit".</p></dd>


<dt>fap_dest_order</dt>
<dd><p>the desired order for the combination of <code>flow_aggregation_point</code> and <code>destination</code> columns. Default is <code>IEATools::fap_flow_iea_order</code>.</p></dd>


<dt>ef_product_order</dt>
<dd><p>the desired order for final energy products in <code>.fu_allocation_template</code>. Default is "Ef.product".</p></dd>


<dt>quantity</dt>
<dd><p>the name of the quantity column in <code>.fu_allocation_template</code>. Default is "Quantity".</p></dd>


<dt>maximum_values</dt>
<dd><p>the name of the maximum value column <code>.fu_allocation_template</code>. Default is "Unit".</p></dd>


<dt>.temp_sort</dt>
<dd><p>the name of a temporary column to be added to <code>.fu_allocation_template</code>.
Default is ".fap_flow".
This column must not be present in <code>.fu_allocation_template</code>.</p></dd>


<dt>.clean_ef_product</dt>
<dd><p>the name of a temporary column to be added to <code>.fu_allocation_template</code>.
Default is ".clean_ef_product".
This column must not be present in <code>.fu_allocation_template</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>An row- and/or column-ordered version of <code>.fu_allocation_template</code></p>


    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>When sorting rows,
the <code>flow_allocation_point</code>, <code>flow</code>, and <code>product</code> columns are considered.
Internally, this function figures out which columns are metadata columns
and groups on those columns before applying the row ordering.
If you want to preserve ordering by metadata, be sure to set factor levels on metadata columns prior to calling this function.</p>
<p>When sorting columns, the order of energy flows through the energy conversion chain is considered.
The column order is:</p><ul><li><p>metadata columns,</p></li>
<li><p>final energy product (<code>Ef.product</code>).</p></li>
<li><p>Machine (the final-to-useful transformation process),</p></li>
<li><p>useful energy product (<code>Eu.product</code>),</p></li>
<li><p>destination where the useful energy now flows,</p></li>
<li><p>years (in columns), and</p></li>
<li><p>allocations (C_x rows).</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">Template</span> <span class="op">&lt;-</span> <span class="fu"><a href="load_tidy_iea_df.html">load_tidy_iea_df</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span> </span></span>
<span class="r-in"><span>  <span class="fu"><a href="specify_all.html">specify_all</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="fu_allocation_template.html">fu_allocation_template</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">Template</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 906 × 15</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Country Method Energy.type Last.stage Ledger.side Flow.aggregation.point </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> GHA     PCM    E           Final      Supply      Energy industry own use</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> GHA     PCM    E           Final      Supply      Energy industry own use</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> GHA     PCM    E           Final      Supply      Energy industry own use</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> GHA     PCM    E           Final      Supply      Energy industry own use</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> GHA     PCM    E           Final      Supply      Energy industry own use</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> GHA     PCM    E           Final      Supply      Energy industry own use</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> GHA     PCM    E           Final      Supply      Energy industry own use</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> GHA     PCM    E           Final      Supply      Energy industry own use</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> GHA     PCM    E           Final      Supply      Energy industry own use</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> GHA     PCM    E           Final      Supply      Energy industry own use</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 896 more rows</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 9 more variables: Unit &lt;chr&gt;, Ef.product &lt;chr&gt;, Machine &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   Eu.product &lt;dbl&gt;, Destination &lt;chr&gt;, Quantity &lt;chr&gt;, Maximum.values &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   `1971` &lt;dbl&gt;, `2000` &lt;dbl&gt;</span></span>
<span class="r-in"><span><span class="va">Template</span> <span class="op"><a href="pipe.html">%&gt;%</a></span> </span></span>
<span class="r-in"><span>  <span class="fu">arrange_iea_fu_allocation_template</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 906 × 15</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Country Method Energy.type Last.stage Ledger.side Flow.aggregation.point </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> GHA     PCM    E           Final      Supply      Energy industry own use</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> GHA     PCM    E           Final      Supply      Energy industry own use</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> GHA     PCM    E           Final      Supply      Energy industry own use</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> GHA     PCM    E           Final      Supply      Energy industry own use</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> GHA     PCM    E           Final      Supply      Energy industry own use</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> GHA     PCM    E           Final      Supply      Energy industry own use</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> GHA     PCM    E           Final      Supply      Energy industry own use</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> GHA     PCM    E           Final      Supply      Energy industry own use</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> GHA     PCM    E           Final      Supply      Energy industry own use</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> GHA     PCM    E           Final      Supply      Energy industry own use</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 896 more rows</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 9 more variables: Unit &lt;chr&gt;, Ef.product &lt;chr&gt;, Machine &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   Eu.product &lt;dbl&gt;, Destination &lt;chr&gt;, Quantity &lt;chr&gt;, Maximum.values &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   `1971` &lt;dbl&gt;, `2000` &lt;dbl&gt;</span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Matthew Heun, Emmanuel Aramendia, Zeke Marshall.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>


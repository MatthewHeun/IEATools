<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Arrange the rows and/or columns of a final-to-useful allocation template — arrange_iea_fu_allocation_template • IEATools</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Arrange the rows and/or columns of a final-to-useful allocation template — arrange_iea_fu_allocation_template" />
<meta property="og:description" content="It is helpful to sort rows and columns of a final-to-useful allocation template
in reasonable ways to assist analysts.
This function sorts rows (top-to-bottom) by default in the same order as appears in the IEA extended energy balance data.
Other orderings can be specified with the fap_flow_order and ef_product_order arguments.
It sorts columns (left-to-right) in the order of energy flow through the energy conversion chain." />
<meta name="twitter:card" content="summary" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">IEATools</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.16</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/IEATools.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/final_to_useful.html">Final to Useful Analysis</a>
    </li>
    <li>
      <a href="../articles/fix_iea_data.html">Fixes for IEA Data</a>
    </li>
    <li>
      <a href="../articles/prep_psut.html">Prepare for PSUT analysis</a>
    </li>
    <li>
      <a href="../articles/specify.html">Specify EIOU Industries and Flows</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Arrange the rows and/or columns of a final-to-useful allocation template</h1>
    
    <div class="hidden name"><code>arrange_iea_fu_allocation_template.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>It is helpful to sort rows and columns of a final-to-useful allocation template
in reasonable ways to assist analysts.
This function sorts rows (top-to-bottom) by default in the same order as appears in the IEA extended energy balance data.
Other orderings can be specified with the <code>fap_flow_order</code> and <code>ef_product_order</code> arguments.
It sorts columns (left-to-right) in the order of energy flow through the energy conversion chain.</p>
    </div>

    <pre class="usage"><span class='fu'>arrange_iea_fu_allocation_template</span>(
  <span class='no'>.fu_allocation_template</span>,
  <span class='kw'>rowcol</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"both"</span>, <span class='st'>"row"</span>, <span class='st'>"col"</span>),
  <span class='kw'>ledger_side</span> <span class='kw'>=</span> <span class='st'>"Ledger.side"</span>,
  <span class='kw'>flow_aggregation_point</span> <span class='kw'>=</span> <span class='st'>"Flow.aggregation.point"</span>,
  <span class='kw'>ef_product</span> <span class='kw'>=</span> <span class='st'>"Ef.product"</span>,
  <span class='kw'>machine</span> <span class='kw'>=</span> <span class='st'>"Machine"</span>,
  <span class='kw'>eu_product</span> <span class='kw'>=</span> <span class='st'>"Eu.product"</span>,
  <span class='kw'>destination</span> <span class='kw'>=</span> <span class='st'>"Destination"</span>,
  <span class='kw'>unit</span> <span class='kw'>=</span> <span class='st'>"Unit"</span>,
  <span class='kw'>fap_dest_order</span> <span class='kw'>=</span> <span class='kw pkg'>IEATools</span><span class='kw ns'>::</span><span class='no'><a href='https://rdrr.io/pkg/IEATools/man/fap_flows.html'>fap_flows</a></span>,
  <span class='kw'>ef_product_order</span> <span class='kw'>=</span> <span class='kw pkg'>IEATools</span><span class='kw ns'>::</span><span class='no'><a href='https://rdrr.io/pkg/IEATools/man/products.html'>products</a></span>,
  <span class='kw'>quantity</span> <span class='kw'>=</span> <span class='st'>"Quantity"</span>,
  <span class='kw'>maximum_values</span> <span class='kw'>=</span> <span class='st'>"Maximum.values"</span>,
  <span class='kw'>.temp_sort</span> <span class='kw'>=</span> <span class='st'>".fap_flow"</span>,
  <span class='kw'>.clean_ef_product</span> <span class='kw'>=</span> <span class='st'>".clean_Ef_product"</span>
)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>.fu_allocation_template</th>
      <td><p>the final-to-useful allocation template created by <code><a href='fu_allocation_template.html'>fu_allocation_template()</a></code></p></td>
    </tr>
    <tr>
      <th>rowcol</th>
      <td><p>one of "<code>both</code>", "<code>row</code>", or "<code>col</code>" to indicate whether rows, columns, or both should be arranged.
Default is "<code>both</code>".</p></td>
    </tr>
    <tr>
      <th>ledger_side</th>
      <td><p>the ledger side column in <code>.fu_allocation_template</code>. Default is "<code>Ledger.side</code>".</p></td>
    </tr>
    <tr>
      <th>flow_aggregation_point</th>
      <td><p>the flow aggregation point column in <code>.fu_allocation_template</code>. Default is "<code>Flow.aggregation.point</code>".</p></td>
    </tr>
    <tr>
      <th>ef_product</th>
      <td><p>the name of the final energy column in <code>.fu_allocation_template</code>. Default is "<code>Ef.product</code>".</p></td>
    </tr>
    <tr>
      <th>machine</th>
      <td><p>the name of the machine column in <code>.fu_allocation_template</code>. Default is "<code>Machine</code>".</p></td>
    </tr>
    <tr>
      <th>eu_product</th>
      <td><p>the name of the useful energy product column in <code>.fu_allocation_template</code>. Default is "<code>Eu.product</code>".</p></td>
    </tr>
    <tr>
      <th>destination</th>
      <td><p>the name of the destination column in <code>.fu_allocation_template</code>. Default is "<code>Destination</code>".</p></td>
    </tr>
    <tr>
      <th>unit</th>
      <td><p>the name of the unit in <code>.fu_allocation_template</code>. Default is "<code>Unit</code>".</p></td>
    </tr>
    <tr>
      <th>fap_dest_order</th>
      <td><p>the desired order for the combination of <code>flow_aggregation_point</code> and <code>destination</code> columns. Default is <code>IEATools::fap_flow_iea_order</code>.</p></td>
    </tr>
    <tr>
      <th>ef_product_order</th>
      <td><p>the desired order for final energy products in <code>.fu_allocation_template</code>. Default is "<code>Ef.product</code>".</p></td>
    </tr>
    <tr>
      <th>quantity</th>
      <td><p>the name of the quantity column in <code>.fu_allocation_template</code>. Default is "<code>Quantity</code>".</p></td>
    </tr>
    <tr>
      <th>maximum_values</th>
      <td><p>the name of the maximum value column <code>.fu_allocation_template</code>. Default is "<code>Unit</code>".</p></td>
    </tr>
    <tr>
      <th>.temp_sort</th>
      <td><p>the name of a temporary column to be added to <code>.fu_allocation_template</code>.
Default is ".fap_flow".
This column must not be present in <code>.fu_allocation_template</code>.</p></td>
    </tr>
    <tr>
      <th>.clean_ef_product</th>
      <td><p>the name of a temporary column to be added to <code>.fu_allocation_template</code>.
Default is ".clean_ef_product".
This column must not be present in <code>.fu_allocation_template</code>.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>An row- and/or column-ordered version of <code>.fu_allocation_template</code></p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>When sorting rows,
the <code>flow_allocation_point</code>, <code>flow</code>, and <code>product</code> columns are considered.
Internally, this function figures out which columns are metadata columns
and groups on those columns before applying the row ordering.
If you want to preserve ordering by metadata, be sure to set factor levels on metadata columns prior to calling this function.</p>
<p>When sorting columns, the order of energy flows through the energy conversion chain is considered.
The column order is:</p><ul>
<li><p>metadata columns,</p></li>
<li><p>final energy product (<code>Ef.product</code>).</p></li>
<li><p>Machine (the final-to-useful transformation process),</p></li>
<li><p>useful energy product (<code>Eu.product</code>),</p></li>
<li><p>destination where the useful energy now flows,</p></li>
<li><p>years (in columns), and</p></li>
<li><p>allocations (C_x rows).</p></li>
</ul>


    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='no'>Template</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='load_tidy_iea_df.html'>load_tidy_iea_df</a></span>() <span class='kw'>%&gt;%</span>
  <span class='fu'><a href='specify_all.html'>specify_all</a></span>() <span class='kw'>%&gt;%</span>
  <span class='fu'><a href='fu_allocation_template.html'>fu_allocation_template</a></span>()
<span class='no'>Template</span></div><div class='output co'>#&gt; <span style='color: #555555;'># A tibble: 705 x 15</span><span>
#&gt;    Country Method Energy.type Last.stage Ledger.side Flow.aggregatio… Unit 
#&gt;    </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span>   </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span>  </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span>       </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span>      </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span>       </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span>            </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span>
#&gt; </span><span style='color: #555555;'> 1</span><span> GHA     PCM    E           Final      Supply      Energy industry… ktoe 
#&gt; </span><span style='color: #555555;'> 2</span><span> GHA     PCM    E           Final      Supply      Energy industry… ktoe 
#&gt; </span><span style='color: #555555;'> 3</span><span> GHA     PCM    E           Final      Supply      Energy industry… ktoe 
#&gt; </span><span style='color: #555555;'> 4</span><span> GHA     PCM    E           Final      Supply      Energy industry… ktoe 
#&gt; </span><span style='color: #555555;'> 5</span><span> GHA     PCM    E           Final      Supply      Energy industry… ktoe 
#&gt; </span><span style='color: #555555;'> 6</span><span> GHA     PCM    E           Final      Supply      Energy industry… ktoe 
#&gt; </span><span style='color: #555555;'> 7</span><span> GHA     PCM    E           Final      Supply      Energy industry… ktoe 
#&gt; </span><span style='color: #555555;'> 8</span><span> GHA     PCM    E           Final      Supply      Energy industry… ktoe 
#&gt; </span><span style='color: #555555;'> 9</span><span> GHA     PCM    E           Final      Supply      Energy industry… ktoe 
#&gt; </span><span style='color: #555555;'>10</span><span> GHA     PCM    E           Final      Supply      Energy industry… ktoe 
#&gt; </span><span style='color: #555555;'># … with 695 more rows, and 8 more variables: Ef.product </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span style='color: #555555;'>, Machine </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span style='color: #555555;'>,
#&gt; #   Eu.product </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span style='color: #555555;'>, Destination </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span style='color: #555555;'>, Quantity </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span style='color: #555555;'>, Maximum.values </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span style='color: #555555;'>,
#&gt; #   `1971` </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span style='color: #555555;'>, `2000` </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span></div><div class='input'><span class='no'>Template</span> <span class='kw'>%&gt;%</span>
  <span class='fu'>arrange_iea_fu_allocation_template</span>()</div><div class='output co'>#&gt; </span><span style='color: #555555;'># A tibble: 705 x 15</span><span>
#&gt;    Country Method Energy.type Last.stage Ledger.side Flow.aggregatio… Unit 
#&gt;    </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span>   </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span>  </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span>       </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span>      </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span>       </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span>            </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span>
#&gt; </span><span style='color: #555555;'> 1</span><span> GHA     PCM    E           Final      Supply      Energy industry… ktoe 
#&gt; </span><span style='color: #555555;'> 2</span><span> GHA     PCM    E           Final      Supply      Energy industry… ktoe 
#&gt; </span><span style='color: #555555;'> 3</span><span> GHA     PCM    E           Final      Supply      Energy industry… ktoe 
#&gt; </span><span style='color: #555555;'> 4</span><span> GHA     PCM    E           Final      Supply      Energy industry… ktoe 
#&gt; </span><span style='color: #555555;'> 5</span><span> GHA     PCM    E           Final      Supply      Energy industry… ktoe 
#&gt; </span><span style='color: #555555;'> 6</span><span> GHA     PCM    E           Final      Supply      Energy industry… ktoe 
#&gt; </span><span style='color: #555555;'> 7</span><span> GHA     PCM    E           Final      Supply      Energy industry… ktoe 
#&gt; </span><span style='color: #555555;'> 8</span><span> GHA     PCM    E           Final      Supply      Energy industry… ktoe 
#&gt; </span><span style='color: #555555;'> 9</span><span> GHA     PCM    E           Final      Supply      Energy industry… ktoe 
#&gt; </span><span style='color: #555555;'>10</span><span> GHA     PCM    E           Final      Supply      Energy industry… ktoe 
#&gt; </span><span style='color: #555555;'># … with 695 more rows, and 8 more variables: Ef.product </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span style='color: #555555;'>, Machine </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span style='color: #555555;'>,
#&gt; #   Eu.product </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span style='color: #555555;'>, Destination </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span style='color: #555555;'>, Quantity </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span style='color: #555555;'>, Maximum.values </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span style='color: #555555;'>,
#&gt; #   `1971` </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span style='color: #555555;'>, `2000` </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span></div></span></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      <li><a href="#value">Value</a></li>
      <li><a href="#details">Details</a></li>
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Matthew Heun.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


